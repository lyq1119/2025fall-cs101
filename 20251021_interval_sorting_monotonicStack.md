# 2025/10/21 ç¼–ç¨‹æŠ€å·§ä¸ç®—æ³•å®æˆ˜ï¼šåŒºé—´é—®é¢˜ã€æ’åºã€å•è°ƒæ ˆä¸åŠ¨æ€è§„åˆ’

Updated 1443 GMT+8 Nov 04, 2025

2024 fall, Complied by Hongfei Yan



> Log:  æ‰©å……äº† æ»‘åŠ¨çª—å£æœ€å¤§å€¼ã€å‰ç¼€å’Œã€Kadaneç®—æ³•
>

# ä¸€ã€è°ƒè¯•ç¨‹åº

https://pythontutor.com å¾ˆå¥½ç”¨ï¼Œé€‚åˆè¿˜ä¸ä¼šç”¨Pycharmè°ƒè¯•å·¥å…·çš„ï¼Œå½“ç„¶åè€…ä¹Ÿå¥½ç”¨ã€‚å¦å¤–å°±æ˜¯printå˜é‡è¾“å‡ºã€‚

> è®¡ç®—ä¸­å¿ƒæœºæˆ¿ PyCharm æ¯” VS Codeè¡¥å…¨åŠŸèƒ½å¼ºã€‚



### 1 Pycharmè°ƒè¯•

åœ¨è¡Œå·å¤„ç‚¹å‡»ï¼Œè®¾ç½®ç«¯ç‚¹ï¼›ç„¶åç‚¹å‡»å³ä¸Šè§’ç»¿è‰²å°è™«å­debugæ¨¡å¼è¿è¡Œã€‚

![image-20241022114421154](https://raw.githubusercontent.com/GMyhf/img/main/img/image-20241022114421154.png)



debugè¿è¡Œåï¼Œåœåœ¨è®¾ç½®äº†çŸ­ç‚¹çš„è¯­å¥ï¼Œå˜é‡ä¸­çš„å€¼éƒ½æ˜¾ç¤ºå‡ºæ¥ã€‚

![image-20241022114608119](https://raw.githubusercontent.com/GMyhf/img/main/img/image-20241022114608119.png)



### 2 pythontutorå¯è§†åŒ–è¿è¡Œ

é€’å½’ç¨‹åºè¿è¡Œè¿‡ç¨‹ï¼Œä¸å®¹æ˜“ç†è§£ã€‚https://pythontutor.comï¼Œå®Œç¾å±•ç¤º å½’å¹¶æ’åº çš„é€’å½’è¿‡ç¨‹ã€‚

![image-20241021221131586](https://raw.githubusercontent.com/GMyhf/img/main/img/202410212211019.png)







# äºŒã€å¸¸è§åŒºé—´é—®é¢˜

ä¸€æ–‡è¯»æ‡‚äº”ç±»å¸¸è§åŒºé—´é—®é¢˜ï¼Œhttps://zhuanlan.zhihu.com/p/446371757

> ç»ƒä¹ ç½‘å€ï¼Œhttps://leetcode.cn ã€‚leetcodeåªéœ€è¦å®Œæˆæ ¸å¿ƒä»£ç å°±å¯ä»¥ï¼Œä¸ç”¨å†™è¾“å…¥è¾“å‡ºéƒ¨åˆ†ã€‚
>
> æ ¸å¿ƒä»£ç å·²ç»æŒ‡å®šå¥½ç±»åã€æ–¹æ³•åã€å‚æ•°åï¼Œè¯·å‹¿ä¿®æ”¹æˆ–é‡å‘½åï¼Œç›´æ¥è¿”å›å€¼å³å¯ã€‚



## 1 åŒºé—´åˆå¹¶

### 1.1 é¢˜æ„æè¿°

åŒºé—´åˆå¹¶é—®é¢˜å¤§æ¦‚**é¢˜æ„**å°±æ˜¯ï¼š

ç»™å‡ºä¸€å †åŒºé—´ï¼Œè¦æ±‚**åˆå¹¶**æ‰€æœ‰**æœ‰äº¤é›†çš„åŒºé—´** ï¼ˆç«¯ç‚¹å¤„ç›¸äº¤ä¹Ÿç®—æœ‰äº¤é›†ï¼‰ã€‚æœ€åé—®åˆå¹¶ä¹‹åçš„**åŒºé—´**ã€‚

å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š

![img](https://pic4.zhimg.com/80/v2-6e3bb59ed6c14eacfa1331c645d4afdf_1440w.jpg)

<center>åŒºé—´åˆå¹¶é—®é¢˜ç¤ºä¾‹ï¼šåˆå¹¶ç»“æœåŒ…å«3ä¸ªåŒºé—´</center>



### 1.2 è§£é¢˜æ­¥éª¤

ã€**æ­¥éª¤ä¸€**ã€‘ï¼šæŒ‰ç…§åŒºé—´**å·¦ç«¯ç‚¹**ä»å°åˆ°å¤§æ’åºã€‚

ã€**æ­¥éª¤äºŒ**ã€‘ï¼šç»´æŠ¤å‰é¢åŒºé—´ä¸­æœ€å³è¾¹çš„ç«¯ç‚¹ä¸ºedã€‚ä»å‰å¾€åæšä¸¾æ¯ä¸€ä¸ªåŒºé—´ï¼Œåˆ¤æ–­æ˜¯å¦åº”è¯¥å°†å½“å‰åŒºé—´è§†ä¸ºæ–°åŒºé—´ã€‚

å‡è®¾å½“å‰éå†åˆ°çš„åŒºé—´ä¸ºç¬¬iä¸ªåŒºé—´ $[l_i,r_i]$ï¼Œæœ‰ä»¥ä¸‹ä¸¤ç§æƒ…å†µï¼š

- $l_i \le ed$ï¼šè¯´æ˜å½“å‰åŒºé—´ä¸å‰é¢åŒºé—´**æœ‰äº¤é›†**ã€‚å› æ­¤**ä¸éœ€è¦**å¢åŠ åŒºé—´ä¸ªæ•°ï¼Œä½†éœ€è¦è®¾ç½® $ed = max(ed, r_i)$ã€‚
- $l_i > ed$: è¯´æ˜å½“å‰åŒºé—´ä¸å‰é¢**æ²¡æœ‰äº¤é›†**ã€‚å› æ­¤**éœ€è¦**å¢åŠ åŒºé—´ä¸ªæ•°ï¼Œå¹¶è®¾ç½® $ed = max(ed, r_i)$ã€‚



### ç»ƒä¹ LC M56.åˆå¹¶åŒºé—´

https://leetcode.cn/problems/merge-intervals/

ä»¥æ•°ç»„ `intervals` è¡¨ç¤ºè‹¥å¹²ä¸ªåŒºé—´çš„é›†åˆï¼Œå…¶ä¸­å•ä¸ªåŒºé—´ä¸º `intervals[i] = [starti, endi]` ã€‚è¯·ä½ åˆå¹¶æ‰€æœ‰é‡å çš„åŒºé—´ï¼Œå¹¶è¿”å› *ä¸€ä¸ªä¸é‡å çš„åŒºé—´æ•°ç»„ï¼Œè¯¥æ•°ç»„éœ€æ°å¥½è¦†ç›–è¾“å…¥ä¸­çš„æ‰€æœ‰åŒºé—´* ã€‚

 

**ç¤ºä¾‹ 1ï¼š**

```
è¾“å…¥ï¼šintervals = [[1,3],[2,6],[8,10],[15,18]]
è¾“å‡ºï¼š[[1,6],[8,10],[15,18]]
è§£é‡Šï¼šåŒºé—´ [1,3] å’Œ [2,6] é‡å , å°†å®ƒä»¬åˆå¹¶ä¸º [1,6].
```

**ç¤ºä¾‹ 2ï¼š**

```
è¾“å…¥ï¼šintervals = [[1,4],[4,5]]
è¾“å‡ºï¼š[[1,5]]
è§£é‡Šï¼šåŒºé—´ [1,4] å’Œ [4,5] å¯è¢«è§†ä¸ºé‡å åŒºé—´ã€‚
```

 

**æç¤ºï¼š**

- `1 <= intervals.length <= 10^4`
- `intervals[i].length == 2`
- `0 <= starti <= endi <= 10^4`





```python
from typing import List
import sys

class Solution:
    def merge(self, intervals: List[List[int]]) -> List[List[int]]:
        # å¯¹åŒºé—´è¿›è¡Œæ’åº
        intervals.sort()

        res = []
        st, ed = -sys.maxsize, -sys.maxsize
        
        for v in intervals:
            if ed == -sys.maxsize:
                st, ed = v[0], v[1]
            elif v[0] <= ed:
                ed = max(v[1], ed)
            elif v[0] > ed:
                res.append([st, ed])
                st, ed = v[0], v[1]

        if ed != -sys.maxsize:
            res.append([st, ed])

        return res
```

è¿™é‡Œæœ‰å‡ ä¸ªéœ€è¦æ³¨æ„çš„åœ°æ–¹ï¼š

- `-sys.maxsize` ç”¨äºè¡¨ç¤ºæœ€å°æ•´æ•°å€¼ã€‚
- ç±»å‹æ³¨è§£ï¼ˆå¦‚ `List[List[int]]`ï¼‰æ˜¯å¯é€‰çš„ï¼Œä½†æœ‰åŠ©äºæé«˜ä»£ç çš„å¯è¯»æ€§å’Œç±»å‹æ£€æŸ¥å·¥å…·çš„æ•ˆç‡ã€‚



### M29947:æ ¡é—¨å¤–çš„æ ‘åˆæ¥äº†

greedy, interval merging, stack, http://cs101.openjudge.cn/practice/29947/

æŸæ ¡å¤§é—¨å¤–é•¿åº¦ä¸ºLçš„é©¬è·¯ä¸Šæœ‰ä¸€æ’æ ‘ï¼Œæ¯ä¸¤æ£µç›¸é‚»çš„æ ‘ä¹‹é—´çš„é—´éš”éƒ½æ˜¯1ç±³ã€‚æˆ‘ä»¬å¯ä»¥æŠŠé©¬è·¯çœ‹æˆä¸€ä¸ªæ•°è½´ï¼Œé©¬è·¯çš„ä¸€ç«¯åœ¨æ•°è½´0çš„ä½ç½®ï¼Œå¦ä¸€ç«¯åœ¨Lçš„ä½ç½®ï¼›æ•°è½´ä¸Šçš„æ¯ä¸ªæ•´æ•°ç‚¹ï¼Œå³0ï¼Œ1ï¼Œ2ï¼Œâ€¦â€¦ï¼ŒLï¼Œéƒ½ç§æœ‰ä¸€æ£µæ ‘ã€‚ é©¬è·¯ä¸Šæœ‰ä¸€äº›åŒºåŸŸè¦ç”¨æ¥å»ºåœ°é“ï¼Œè¿™äº›åŒºåŸŸç”¨å®ƒä»¬åœ¨æ•°è½´ä¸Šçš„èµ·å§‹ç‚¹å’Œç»ˆæ­¢ç‚¹è¡¨ç¤ºã€‚å·²çŸ¥ä»»ä¸€åŒºåŸŸçš„èµ·å§‹ç‚¹å’Œç»ˆæ­¢ç‚¹çš„åæ ‡éƒ½æ˜¯æ•´æ•°ï¼ŒåŒºåŸŸä¹‹é—´å¯èƒ½æœ‰é‡åˆçš„éƒ¨åˆ†ã€‚ç°åœ¨è¦æŠŠè¿™äº›åŒºåŸŸä¸­çš„æ ‘ï¼ˆåŒ…æ‹¬åŒºåŸŸç«¯ç‚¹å¤„çš„ä¸¤æ£µæ ‘ï¼‰ç§»èµ°ã€‚ä½ çš„ä»»åŠ¡æ˜¯è®¡ç®—å°†è¿™äº›æ ‘éƒ½ç§»èµ°åï¼Œé©¬è·¯ä¸Šè¿˜æœ‰å¤šå°‘æ£µæ ‘ã€‚

**è¾“å…¥**

è¾“å…¥çš„ç¬¬ä¸€è¡Œæœ‰ä¸¤ä¸ªæ•´æ•°Lï¼ˆ1 <= L <= 10^9ï¼‰å’Œ Mï¼ˆ1 <= M <= 100ï¼‰ï¼ŒLä»£è¡¨é©¬è·¯çš„é•¿åº¦ï¼ŒMä»£è¡¨åŒºåŸŸçš„æ•°ç›®ï¼ŒLå’ŒMä¹‹é—´ç”¨ä¸€ä¸ªç©ºæ ¼éš”å¼€ã€‚æ¥ä¸‹æ¥çš„Mè¡Œæ¯è¡ŒåŒ…å«ä¸¤ä¸ªä¸åŒçš„æ•´æ•°ï¼Œç”¨ä¸€ä¸ªç©ºæ ¼éš”å¼€ï¼Œè¡¨ç¤ºä¸€ä¸ªåŒºåŸŸçš„èµ·å§‹ç‚¹å’Œç»ˆæ­¢ç‚¹çš„åæ ‡ã€‚

**è¾“å‡º**

è¾“å‡ºåŒ…æ‹¬ä¸€è¡Œï¼Œè¿™ä¸€è¡ŒåªåŒ…å«ä¸€ä¸ªæ•´æ•°ï¼Œè¡¨ç¤ºé©¬è·¯ä¸Šå‰©ä½™çš„æ ‘çš„æ•°ç›®ã€‚

æ ·ä¾‹è¾“å…¥

```
500 3
150 300
100 200
470 471
```

æ ·ä¾‹è¾“å‡º

```
298
```

æ¥æº

yan



æ€è·¯ï¼šåŒºé—´åˆå¹¶ã€‚æ’åºæ˜¯ä¸ºäº†ä¿è¯å–äº¤é›†çš„æ–¹å‘å”¯ä¸€ï¼Œè¿™ç§å•å‘å…³ç³»å¯ä»¥é¿å…åˆ†ç±»è®¨è®ºã€‚

```python
L, M = map(int, input().split())
intervals = []

for _ in range(M):
    s, e = map(int, input().split())
    if s > e:
        s, e = e, s
    intervals.append((s, e))

# æŒ‰èµ·ç‚¹æ’åº
intervals.sort()

# åˆå¹¶åŒºé—´
merged = []
for s, e in intervals:
    if not merged or s > merged[-1][1] + 1:
        merged.append([s, e])
    else:
        merged[-1][1] = max(merged[-1][1], e)

# è®¡ç®—è¢«ç æ‰çš„æ ‘æ€»æ•°
cut = sum(e - s + 1 for s, e in merged)
remain = (L + 1) - cut

print(remain)
```





## 2 é€‰æ‹©ä¸ç›¸äº¤åŒºé—´

### 2.1 é¢˜æ„æè¿°

**é€‰æ‹©ä¸ç›¸äº¤åŒºé—´é—®é¢˜**å¤§æ¦‚é¢˜æ„å°±æ˜¯ï¼š

ç»™å‡ºä¸€å †åŒºé—´ï¼Œè¦æ±‚é€‰æ‹©**å°½é‡å¤š**çš„åŒºé—´ï¼Œä½¿å¾—è¿™äº›åŒºé—´**äº’ä¸ç›¸äº¤**ï¼Œæ±‚å¯é€‰å–çš„åŒºé—´çš„**æœ€å¤§æ•°é‡**ã€‚è¿™é‡Œç«¯ç‚¹ç›¸åŒä¹Ÿç®—æœ‰é‡å¤ã€‚

å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š

![img](https://pic1.zhimg.com/80/v2-690f7e53fd34c39802f45f48b59d5c5a_1440w.webp)

<center>é€‰æ‹©ä¸ç›¸äº¤åŒºé—´é—®é¢˜ç¤ºä¾‹ï¼šç»“æœåŒ…å«3ä¸ªåŒºé—´</center>

### 2.2 è§£é¢˜æ­¥éª¤

ã€**æ­¥éª¤ä¸€**ã€‘ï¼šæŒ‰ç…§åŒºé—´**å³ç«¯ç‚¹**ä»å°åˆ°å¤§æ’åºã€‚

ã€**æ­¥éª¤äºŒ**ã€‘ï¼šä»å‰å¾€åä¾æ¬¡æšä¸¾æ¯ä¸ªåŒºé—´ã€‚

å‡è®¾å½“å‰éå†åˆ°çš„åŒºé—´ä¸ºç¬¬iä¸ªåŒºé—´ $[l_i,r_i]$ï¼Œæœ‰ä»¥ä¸‹ä¸¤ç§æƒ…å†µï¼š

- $l_i \le ed$ï¼šè¯´æ˜å½“å‰åŒºé—´ä¸å‰é¢åŒºé—´æœ‰äº¤é›†ã€‚å› æ­¤ç›´æ¥è·³è¿‡ã€‚
- $l_i > ed$: è¯´æ˜å½“å‰åŒºé—´ä¸å‰é¢æ²¡æœ‰äº¤é›†ã€‚å› æ­¤é€‰ä¸­å½“å‰åŒºé—´ï¼Œå¹¶è®¾ç½® $ed = r_i$ã€‚



### ç»ƒä¹ LC M435.æ— é‡å åŒºé—´

https://leetcode.cn/problems/non-overlapping-intervals/

ç»™å®šä¸€ä¸ªåŒºé—´çš„é›†åˆ `intervals` ï¼Œå…¶ä¸­ `intervals[i] = [starti, endi]` ã€‚è¿”å› *éœ€è¦ç§»é™¤åŒºé—´çš„æœ€å°æ•°é‡ï¼Œä½¿å‰©ä½™åŒºé—´äº’ä¸é‡å * ã€‚

**æ³¨æ„** åªåœ¨ä¸€ç‚¹ä¸Šæ¥è§¦çš„åŒºé—´æ˜¯ **ä¸é‡å çš„**ã€‚ä¾‹å¦‚ `[1, 2]` å’Œ `[2, 3]` æ˜¯ä¸é‡å çš„ã€‚

 

**ç¤ºä¾‹ 1:**

```
è¾“å…¥: intervals = [[1,2],[2,3],[3,4],[1,3]]
è¾“å‡º: 1
è§£é‡Š: ç§»é™¤ [1,3] åï¼Œå‰©ä¸‹çš„åŒºé—´æ²¡æœ‰é‡å ã€‚
```

**ç¤ºä¾‹ 2:**

```
è¾“å…¥: intervals = [ [1,2], [1,2], [1,2] ]
è¾“å‡º: 2
è§£é‡Š: ä½ éœ€è¦ç§»é™¤ä¸¤ä¸ª [1,2] æ¥ä½¿å‰©ä¸‹çš„åŒºé—´æ²¡æœ‰é‡å ã€‚
```

**ç¤ºä¾‹ 3:**

```
è¾“å…¥: intervals = [ [1,2], [2,3] ]
è¾“å‡º: 0
è§£é‡Š: ä½ ä¸éœ€è¦ç§»é™¤ä»»ä½•åŒºé—´ï¼Œå› ä¸ºå®ƒä»¬å·²ç»æ˜¯æ— é‡å çš„äº†ã€‚
```

 

**æç¤º:**

- `1 <= intervals.length <= 10^5`
- `intervals[i].length == 2`
- `-5 * 10^4 <= starti < endi <= 5 * 10^4`





```python
from typing import List
import sys

class Solution:
    def eraseOverlapIntervals(self, intervals: List[List[int]]) -> int:
        # æŒ‰ç…§å³ç«¯ç‚¹ä»å°åˆ°å¤§æ’åº
        intervals.sort(key=lambda x: x[1])

        res = 0
        ed = -sys.maxsize
        
        for v in intervals:
            if ed <= v[0]:
                res += 1
                ed = v[1]

        return len(intervals) - res
```



## 3 åŒºé—´é€‰ç‚¹é—®é¢˜

### 3.1 é¢˜æ„æè¿°

**åŒºé—´é€‰ç‚¹é—®é¢˜**å¤§æ¦‚é¢˜æ„å°±æ˜¯ï¼š

ç»™å‡ºä¸€å †åŒºé—´ï¼Œå–**å°½é‡å°‘**çš„ç‚¹ï¼Œä½¿å¾—æ¯ä¸ªåŒºé—´å†…**è‡³å°‘æœ‰ä¸€ä¸ªç‚¹**ï¼ˆä¸åŒåŒºé—´å†…å«çš„ç‚¹å¯ä»¥æ˜¯åŒä¸€ä¸ªï¼Œä½äºåŒºé—´ç«¯ç‚¹ä¸Šçš„ç‚¹ä¹Ÿç®—ä½œåŒºé—´å†…ï¼‰ã€‚

å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š

![img](https://pica.zhimg.com/80/v2-a7ef021e1191ec53f20609ba870b44ba_1440w.webp)

<center>åŒºé—´é€‰ç‚¹é—®é¢˜ç¤ºä¾‹ï¼Œæœ€ç»ˆè‡³å°‘é€‰æ‹©3ä¸ªç‚¹</center>



è¿™ä¸ªé¢˜å¯ä»¥è½¬åŒ–ä¸ºä¸Šä¸€é¢˜çš„**æ±‚æœ€å¤§ä¸ç›¸äº¤åŒºé—´**çš„æ•°é‡ã€‚

å¯¹äºè¿™äº›**æœ€å¤§çš„ä¸ç›¸äº¤åŒºé—´**ï¼Œè‚¯å®šæ˜¯æ¯ä¸ªåŒºé—´éƒ½éœ€è¦é€‰å‡ºä¸€ä¸ªç‚¹ã€‚è€Œå…¶ä»–çš„åŒºé—´éƒ½æ˜¯å’Œè¿™äº›é€‰å‡ºçš„åŒºé—´æœ‰é‡å¤çš„ï¼Œæˆ‘ä»¬åªéœ€è¦æŠŠç‚¹çš„ä½ç½®é€‰åœ¨**é‡åˆ**çš„éƒ¨åˆ†å³å¯ã€‚

ä¹Ÿå¯ä»¥æ¢ä¸€ç§æ€è·¯ï¼š

æˆ‘ä»¬å°†åŒºé—´æŒ‰ç…§**å³ç«¯ç‚¹**ä»å°åˆ°å¤§æ’åºï¼Œè¿™æ—¶æˆ‘ä»¬åº”è¯¥å°½é‡é€‰æ‹©**å½“å‰åŒºé—´æœ€å³è¾¹çš„ç‚¹**ã€‚

å› ä¸ºæœ€å³è¾¹çš„ç‚¹å¯èƒ½å’Œä¸‹é¢çš„å…¶ä»–åŒºé—´é‡å¤ï¼Œæ‰€ä»¥è‡³å°‘ä¸æ¯”é€‰æ‹©åŒºé—´é å‰ä½ç½®çš„ç‚¹å·®ã€‚

æ‰€ä»¥ï¼Œæœ€åçš„è§£æ³•ä¸é€‰æ‹©ä¸ç›¸äº¤åŒºé—´é—®é¢˜è§£æ³•å®Œå…¨ä¸€æ ·ã€‚

### 3.2 è§£é¢˜æ­¥éª¤

ã€**æ­¥éª¤ä¸€**ã€‘ï¼šæŒ‰ç…§åŒºé—´å³ç«¯ç‚¹ä»å°åˆ°å¤§æ’åºã€‚

ã€**æ­¥éª¤äºŒ**ã€‘ï¼šä»å‰å¾€åä¾æ¬¡æšä¸¾æ¯ä¸ªåŒºé—´ã€‚

å‡è®¾å½“å‰éå†åˆ°çš„åŒºé—´ä¸ºç¬¬iä¸ªåŒºé—´ $[l_i,r_i]$ï¼Œæœ‰ä»¥ä¸‹ä¸¤ç§æƒ…å†µï¼š

- $l_i \le ed$ï¼šè¯´æ˜å½“å‰åŒºé—´ä¸å‰é¢åŒºé—´æœ‰äº¤é›†ï¼Œå‰é¢å·²ç»é€‰ç‚¹äº†ã€‚å› æ­¤ç›´æ¥è·³è¿‡ã€‚
- $l_i > ed$: è¯´æ˜å½“å‰åŒºé—´ä¸å‰é¢æ²¡æœ‰äº¤é›†ã€‚å› æ­¤é€‰ä¸­å½“å‰åŒºé—´ï¼Œå¹¶è®¾ç½® $ed = r_i$ã€‚



### ç»ƒä¹ LC M452. ç”¨æœ€å°‘é‡çš„ç®­å¼•çˆ†æ°”çƒ

https://leetcode.cn/problems/minimum-number-of-arrows-to-burst-balloons/

æœ‰ä¸€äº›çƒå½¢æ°”çƒè´´åœ¨ä¸€å µç”¨ XY å¹³é¢è¡¨ç¤ºçš„å¢™é¢ä¸Šã€‚å¢™é¢ä¸Šçš„æ°”çƒè®°å½•åœ¨æ•´æ•°æ•°ç»„ `points` ï¼Œå…¶ä¸­`points[i] = [xstart, xend]` è¡¨ç¤ºæ°´å¹³ç›´å¾„åœ¨ `xstart` å’Œ `xend`ä¹‹é—´çš„æ°”çƒã€‚ä½ ä¸çŸ¥é“æ°”çƒçš„ç¡®åˆ‡ y åæ ‡ã€‚

ä¸€æ”¯å¼“ç®­å¯ä»¥æ²¿ç€ x è½´ä»ä¸åŒç‚¹ **å®Œå…¨å‚ç›´** åœ°å°„å‡ºã€‚åœ¨åæ ‡ `x` å¤„å°„å‡ºä¸€æ”¯ç®­ï¼Œè‹¥æœ‰ä¸€ä¸ªæ°”çƒçš„ç›´å¾„çš„å¼€å§‹å’Œç»“æŸåæ ‡ä¸º xstartï¼Œxendï¼Œ ä¸”æ»¡è¶³  `xstart â‰¤ x â‰¤ xend`ï¼Œåˆ™è¯¥æ°”çƒä¼šè¢« **å¼•çˆ†** ã€‚å¯ä»¥å°„å‡ºçš„å¼“ç®­çš„æ•°é‡ **æ²¡æœ‰é™åˆ¶** ã€‚ å¼“ç®­ä¸€æ—¦è¢«å°„å‡ºä¹‹åï¼Œå¯ä»¥æ— é™åœ°å‰è¿›ã€‚

ç»™ä½ ä¸€ä¸ªæ•°ç»„ `points` ï¼Œ*è¿”å›å¼•çˆ†æ‰€æœ‰æ°”çƒæ‰€å¿…é¡»å°„å‡ºçš„ **æœ€å°** å¼“ç®­æ•°* ã€‚

 

**ç¤ºä¾‹ 1ï¼š**

```
è¾“å…¥ï¼špoints = [[10,16],[2,8],[1,6],[7,12]]
è¾“å‡ºï¼š2
è§£é‡Šï¼šæ°”çƒå¯ä»¥ç”¨2æ”¯ç®­æ¥çˆ†ç ´:
-åœ¨x = 6å¤„å°„å‡ºç®­ï¼Œå‡»ç ´æ°”çƒ[2,8]å’Œ[1,6]ã€‚
-åœ¨x = 11å¤„å‘å°„ç®­ï¼Œå‡»ç ´æ°”çƒ[10,16]å’Œ[7,12]ã€‚
```

**ç¤ºä¾‹ 2ï¼š**

```
è¾“å…¥ï¼špoints = [[1,2],[3,4],[5,6],[7,8]]
è¾“å‡ºï¼š4
è§£é‡Šï¼šæ¯ä¸ªæ°”çƒéœ€è¦å°„å‡ºä¸€æ”¯ç®­ï¼Œæ€»å…±éœ€è¦4æ”¯ç®­ã€‚
```

**ç¤ºä¾‹ 3ï¼š**

```
è¾“å…¥ï¼špoints = [[1,2],[2,3],[3,4],[4,5]]
è¾“å‡ºï¼š2
è§£é‡Šï¼šæ°”çƒå¯ä»¥ç”¨2æ”¯ç®­æ¥çˆ†ç ´:
- åœ¨x = 2å¤„å‘å°„ç®­ï¼Œå‡»ç ´æ°”çƒ[1,2]å’Œ[2,3]ã€‚
- åœ¨x = 4å¤„å°„å‡ºç®­ï¼Œå‡»ç ´æ°”çƒ[3,4]å’Œ[4,5]ã€‚
```

 



**æç¤º:**

- `1 <= points.length <= 105`
- `points[i].length == 2`
- `-231 <= xstart < xend <= 231 - 1`



```python
class Solution:
    def findMinArrowShots(self, points: List[List[int]]) -> int:
        # æŒ‰ç…§å³ç«¯ç‚¹ä»å°åˆ°å¤§æ’åº
        points.sort(key=lambda x: x[1])

        res = 0
        ed = -sys.maxsize
        
        for v in points:
            if ed < v[0]:
                res += 1
                ed = v[1]

        return res
```



## 4 åŒºé—´è¦†ç›–é—®é¢˜

### 4.1 é¢˜æ„æè¿°

**åŒºé—´è¦†ç›–é—®é¢˜**å¤§æ¦‚é¢˜æ„å°±æ˜¯ï¼š

ç»™å‡ºä¸€å †åŒºé—´å’Œä¸€ä¸ªç›®æ ‡åŒºé—´ï¼Œé—®æœ€å°‘é€‰æ‹©å¤šå°‘åŒºé—´å¯ä»¥**è¦†ç›–**æ‰é¢˜ä¸­ç»™å‡ºçš„è¿™æ®µç›®æ ‡åŒºé—´ã€‚

å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š 

![img](https://pic3.zhimg.com/80/v2-66041d9941667482fc51adeb4a616f64_1440w.webp)

<center>åŒºé—´è¦†ç›–é—®é¢˜ç¤ºä¾‹ï¼Œæœ€ç»ˆè‡³å°‘é€‰æ‹©2ä¸ªåŒºé—´æ‰èƒ½è¦†ç›–ç›®æ ‡åŒºé—´</center>

### 4.2. è§£é¢˜æ­¥éª¤

ã€**æ­¥éª¤ä¸€**ã€‘ï¼šæŒ‰ç…§åŒºé—´å·¦ç«¯ç‚¹ä»å°åˆ°å¤§æ’åºã€‚

**æ­¥éª¤äºŒ**ã€‘ï¼š**ä»å‰å¾€å**ä¾æ¬¡æšä¸¾æ¯ä¸ªåŒºé—´ï¼Œåœ¨æ‰€æœ‰èƒ½è¦†ç›–å½“å‰ç›®æ ‡åŒºé—´èµ·å§‹ä½ç½®startçš„åŒºé—´ä¹‹ä¸­ï¼Œé€‰æ‹©**å³ç«¯ç‚¹**æœ€å¤§çš„åŒºé—´ã€‚

å‡è®¾å³ç«¯ç‚¹æœ€å¤§çš„åŒºé—´æ˜¯ç¬¬$i$ä¸ªåŒºé—´ï¼Œå³ç«¯ç‚¹ä¸º $r_i$ã€‚

æœ€åå°†ç›®æ ‡åŒºé—´çš„startæ›´æ–°æˆ$r_i$



### M01328: Radar Installation

greedy, http://cs101.openjudge.cn/pctbook/M01328/

Assume the coasting is an infinite straight line. Land is in one side of coasting, sea in the other. Each small island is a point locating in the sea side. And any radar installation, locating on the coasting, can only cover d distance, so an island in the sea can be covered by a radius installation, if the distance between them is at most d.

We use Cartesian coordinate system, defining the coasting is the x-axis. The sea side is above x-axis, and the land side below. Given the position of each island in the sea, and given the distance of the coverage of the radar installation, your task is to write a program to find the minimal number of radar installations to cover all the islands. Note that the position of an island is represented by its x-y coordinates.
![image-20231021115237439](https://raw.githubusercontent.com/GMyhf/img/main/img/image-20231021115237439.png)
Figure A Sample Input of Radar Installations

**è¾“å…¥**

The input consists of several test cases. The first line of each case contains two integers n (1<=n<=1000) and d, where n is the number of islands in the sea and d is the distance of coverage of the radar installation. This is followed by n lines each containing two integers representing the coordinate of the position of each island. Then a blank line follows to separate the cases.

The input is terminated by a line containing pair of zeros

**è¾“å‡º**

For each test case output one line consisting of the test case number followed by the minimal number of radar installations needed. "-1" installation means no solution for that case.

æ ·ä¾‹è¾“å…¥

```
3 2
1 2
-3 1
2 1

1 2
0 2

0 0
```

æ ·ä¾‹è¾“å‡º

```
Case 1: 2
Case 2: 1
```

æ¥æº: Beijing 2002



æ˜ å°„åˆ°xè½´ï¼Œæ’åºï¼Œå·¦å³ç«¯ç‚¹äº’ç›¸çœ‹çœ‹ã€‚ç¨‹åºé€»è¾‘è§£é‡Šï¼š

1. **è®¡ç®—å²›å±¿çš„è¦†ç›–åŒºé—´**ï¼šå¯¹äºæ¯ä¸ªå²›å±¿ï¼Œå…ˆæ ¹æ®å…¶xå’Œyåæ ‡è®¡ç®—å‡ºåœ¨xè½´ä¸Šçš„åŒºé—´èŒƒå›´ã€‚è¿™æ˜¯é€šè¿‡$\sqrt{d^2 - y^2}$æ¥ç¡®å®šçš„ã€‚
2. **æ’åº**ï¼šå°†æ‰€æœ‰å²›å±¿çš„åŒºé—´æŒ‰ç…§å³ç«¯ç‚¹è¿›è¡Œæ’åºï¼Œç›®çš„æ˜¯å°½å¯èƒ½è®©æ–°çš„é›·è¾¾è¦†ç›–æ›´å¤šçš„å²›å±¿ã€‚
3. **æ›´æ–°è¦†ç›–èŒƒå›´**ï¼šé€ä¸ªå²›å±¿è¿›è¡Œéå†ï¼Œå°è¯•æ›´æ–°å½“å‰é›·è¾¾èƒ½å¤Ÿè¦†ç›–çš„æœ€è¿œç‚¹ã€‚å¦‚æœå½“å‰å²›å±¿çš„å·¦ç«¯ç‚¹åœ¨å·²ç»è¦†ç›–çš„åŒºé—´ä¹‹å¤–ï¼Œåˆ™å¿…é¡»å¢åŠ ä¸€ä¸ªæ–°çš„é›·è¾¾ï¼Œå¹¶å°†æ–°çš„è¦†ç›–èŒƒå›´è®¾ä¸ºå½“å‰å²›å±¿çš„åŒºé—´ã€‚

```python
import math

def solve(n, d, islands):
    if d < 0:
        return -1

    ranges = []
    for x, y in islands:
        if y > d:
            return -1
        delta = math.sqrt(d * d - y * y)
        ranges.append((x - delta, x + delta))

    if not ranges:
        return -1

    ranges.sort(key=lambda x:x[1])

    number = 1
    r = ranges[0][1]
    for start, end in ranges[1:]:
        if r < start:
            r = end
            number += 1

    return number

case_number = 0
while True:
    n, d = map(int, input().split())
    if n == 0 and d == 0:
        break

    case_number += 1
    islands = []
    for _ in range(n):
        islands.append(tuple(map(int, input().split())))

    result = solve(n, d, islands)
    print(f"Case {case_number}: {result}")
    input()
```





### ç»ƒä¹ LC M1024. è§†é¢‘æ‹¼æ¥

https://leetcode.cn/problems/video-stitching/

ä½ å°†ä¼šè·å¾—ä¸€ç³»åˆ—è§†é¢‘ç‰‡æ®µï¼Œè¿™äº›ç‰‡æ®µæ¥è‡ªäºä¸€é¡¹æŒç»­æ—¶é•¿ä¸º `time` ç§’çš„ä½“è‚²èµ›äº‹ã€‚è¿™äº›ç‰‡æ®µå¯èƒ½æœ‰æ‰€é‡å ï¼Œä¹Ÿå¯èƒ½é•¿åº¦ä¸ä¸€ã€‚

ä½¿ç”¨æ•°ç»„ `clips` æè¿°æ‰€æœ‰çš„è§†é¢‘ç‰‡æ®µï¼Œå…¶ä¸­ `clips[i] = [starti, endi]` è¡¨ç¤ºï¼šæŸä¸ªè§†é¢‘ç‰‡æ®µå¼€å§‹äº `starti` å¹¶äº `endi` ç»“æŸã€‚

ç”šè‡³å¯ä»¥å¯¹è¿™äº›ç‰‡æ®µè‡ªç”±åœ°å†å‰ªè¾‘ï¼š

- ä¾‹å¦‚ï¼Œç‰‡æ®µ `[0, 7]` å¯ä»¥å‰ªåˆ‡æˆ `[0, 1] + [1, 3] + [3, 7]` ä¸‰éƒ¨åˆ†ã€‚

æˆ‘ä»¬éœ€è¦å°†è¿™äº›ç‰‡æ®µè¿›è¡Œå†å‰ªè¾‘ï¼Œå¹¶å°†å‰ªè¾‘åçš„å†…å®¹æ‹¼æ¥æˆè¦†ç›–æ•´ä¸ªè¿åŠ¨è¿‡ç¨‹çš„ç‰‡æ®µï¼ˆ`[0, time]`ï¼‰ã€‚è¿”å›æ‰€éœ€ç‰‡æ®µçš„æœ€å°æ•°ç›®ï¼Œå¦‚æœæ— æ³•å®Œæˆè¯¥ä»»åŠ¡ï¼Œåˆ™è¿”å› `-1` ã€‚

 

**ç¤ºä¾‹ 1ï¼š**

```
è¾“å…¥ï¼šclips = [[0,2],[4,6],[8,10],[1,9],[1,5],[5,9]], time = 10
è¾“å‡ºï¼š3
è§£é‡Šï¼š
é€‰ä¸­ [0,2], [8,10], [1,9] è¿™ä¸‰ä¸ªç‰‡æ®µã€‚
ç„¶åï¼ŒæŒ‰ä¸‹é¢çš„æ–¹æ¡ˆé‡åˆ¶æ¯”èµ›ç‰‡æ®µï¼š
å°† [1,9] å†å‰ªè¾‘ä¸º [1,2] + [2,8] + [8,9] ã€‚
ç°åœ¨æ‰‹ä¸Šçš„ç‰‡æ®µä¸º [0,2] + [2,8] + [8,10]ï¼Œè€Œè¿™äº›è¦†ç›–äº†æ•´åœºæ¯”èµ› [0, 10]ã€‚
```

**ç¤ºä¾‹ 2ï¼š**

```
è¾“å…¥ï¼šclips = [[0,1],[1,2]], time = 5
è¾“å‡ºï¼š-1
è§£é‡Šï¼š
æ— æ³•åªç”¨ [0,1] å’Œ [1,2] è¦†ç›– [0,5] çš„æ•´ä¸ªè¿‡ç¨‹ã€‚
```

**ç¤ºä¾‹ 3ï¼š**

```
è¾“å…¥ï¼šclips = [[0,1],[6,8],[0,2],[5,6],[0,4],[0,3],[6,7],[1,3],[4,7],[1,4],[2,5],[2,6],[3,4],[4,5],[5,7],[6,9]], time = 9
è¾“å‡ºï¼š3
è§£é‡Šï¼š 
é€‰å–ç‰‡æ®µ [0,4], [4,7] å’Œ [6,9] ã€‚
```

 

**æç¤ºï¼š**

- `1 <= clips.length <= 100`
- `0 <= starti <= endi <= 100`
- `1 <= time <= 100`





```python
from typing import List

class Solution:
    def videoStitching(self, clips: List[List[int]], time: int) -> int:
        # å¯¹ clips æŒ‰èµ·ç‚¹å‡åºæ’åº
        clips.sort()

        st, ed = 0, time
        res = 0

        i = 0
        while i < len(clips) and st < ed:
            maxR = 0
            # æ‰¾åˆ°æ‰€æœ‰èµ·ç‚¹å°äºç­‰äº st çš„ç‰‡æ®µï¼Œå¹¶è®°å½•è¿™äº›ç‰‡æ®µçš„æœ€å¤§ç»ˆç‚¹ maxR
            while i < len(clips) and clips[i][0] <= st:
                maxR = max(maxR, clips[i][1])
                i += 1

            if maxR <= st:
                # æ— æ³•ç»§ç»­è¦†ç›–
                return -1

            # æ›´æ–° st ä¸º maxRï¼Œå¹¶å¢åŠ ç»“æœè®¡æ•°
            st = maxR
            res += 1

            if maxR >= ed:
                # å·²ç»è¦†ç›–åˆ°ç»ˆç‚¹
                return res

        # å¦‚æœæ²¡æœ‰æˆåŠŸè¦†ç›–åˆ°ç»ˆç‚¹
        return -1
```



### ç»ƒä¹ T27104: ä¸–ç•Œæ¯åªå› 

greedy/dp, http://cs101.openjudge.cn/practice/27104/

å¡å¡”å°”ä¸–ç•Œæ¯æ­£åœ¨ç«çƒ­è¿›è¡Œä¸­ï¼ŒPå¤§å¯Œå“¥æå“¥å¬é—»æœ‰ä¸€ç§å«"è‚¤ç™½Â·æ€ç¾Â·å®‡å®™æ— æ•ŒÂ·ä¸–ç•Œæ¯Â·é¢„æµ‹é¸¡"çš„é¸¡å“ç§ï¼ˆä»¥ä¸‹ç®€ç§°ä¸ºåªå› ï¼‰æœ‰æ¦‚ç‡èƒ½å‡†ç¡®é¢„æµ‹ä¸–ç•Œæ¯èµ›æœï¼Œä¸€å£æ°”ä¹°æ¥æ— æ•°åªåªå› ï¼Œå¹¶æŠŠå®ƒä»¬å¡è¿›äº†Nä¸ªåªå› çªé‡Œï¼Œä½†åªå› çªå®åœ¨å¤ªå¤šäº†ï¼Œæå“¥éœ€è¦å®‰è£…æ‘„åƒå¤´æ¥è§‚æµ‹é‡Œé¢çš„åªå› çš„é¢„æµ‹è¡Œä¸ºã€‚

å…·ä½“æ¥è¯´ï¼Œæå“¥çš„åªå› çªå¯ä»¥çœ‹ä½œåˆ†å¸ƒåœ¨ä¸€æ¡ç›´çº¿ä¸Šçš„Nä¸ªç‚¹ï¼Œç¼–å·ä¸º1åˆ°Nã€‚ç”±äºæ¯ä¸ªåªå› çªçš„ç»“æ„ä¸åŒï¼Œåœ¨ç¼–å·ä¸ºiçš„åªå› çªå¤„å®‰è£…æ‘„åƒå¤´ï¼Œè§‚æµ‹èŒƒå›´ä¸ºa_iï¼Œå…¶ä¸­aæ˜¯é•¿ä¸ºNçš„æ•´æ•°åˆ—ï¼Œè¡¨ç¤ºè‹¥åœ¨æ­¤å®‰è£…æ‘„åƒå¤´ï¼Œå¯ä»¥è§‚æµ‹åˆ°ç¼–å·åœ¨ [ i - a_i , i + a_i ]ï¼ˆé—­åŒºé—´ï¼‰å†…çš„æ‰€æœ‰åªå› çªã€‚

æå“¥è§‰å¾—æ‘„åƒå¤´æˆæœ¬é«˜ï¼Œå†³å®šæŠ é—¨ä¸€ä¸‹ï¼Œè¯·ä½ æ¥å¸®å¿™çœ‹çœ‹æœ€å°‘éœ€è¦å®‰è£…å¤šå°‘ä¸ªæ‘„åƒå¤´ï¼Œæ‰èƒ½è§‚æµ‹åˆ°å…¨éƒ¨Nä¸ªåªå› çªã€‚ä½œä¸ºå›æŠ¥ï¼Œä»–ä¼šè¯·ä½ å–ä¸€æ¯èŠ‹æ³¥æ³¢æ³¢ç‰›ä¹³èŒ¶ã€‚

**è¾“å…¥**

ç¬¬ä¸€è¡Œï¼šä¸€ä¸ªæ­£æ•´æ•°ï¼Œä»£è¡¨æœ‰Nä¸ªåªå› çªã€‚
ç¬¬äºŒè¡Œç»™å‡ºæ•°åˆ—aï¼šNä¸ªéè´Ÿæ•´æ•°ï¼Œç¬¬iä¸ªæ•°ä»£è¡¨a_iï¼Œä¹Ÿå°±æ˜¯åœ¨ç¬¬iä¸ªåªå› çªè£…æ‘„åƒå¤´èƒ½è§‚æµ‹åˆ°çš„åŒºé—´çš„åŠå¾„ã€‚

æ•°æ®ä¿è¯ N â‰¤ 500000ï¼Œ0 â‰¤ a_i â‰¤ N

**è¾“å‡º**

ä¸€ä¸ªæ•´æ•°ï¼Œå³æœ€å°‘éœ€è¦è£…çš„æ‘„åƒå¤´æ•°é‡ã€‚

æ ·ä¾‹è¾“å…¥

```
10
2 0 1 1 0 3 1 0 2 0
```

æ ·ä¾‹è¾“å‡º

```
3
```

æç¤ºï¼šå½©è›‹ï¼šåªå› ä»¬å¾ˆå–œæ¬¢é‚£ä¸ªç©¿ç€è“ç™½çƒè¡£é•¿å¾—åƒé»„é‡‘çŸ¿å·¥çš„10å·

æ¥æºï¼šè®¡æ¦‚A 2022æœŸæœ«



æ˜¯å…¸å‹çš„â€œ**åŒºé—´è¦†ç›–æœ€å°é›†åˆ**â€é—®é¢˜ï¼Œæœ¬è´¨ä¸Šæ˜¯è´ªå¿ƒç®—æ³•åœ¨ä¸€ç»´çº¿æ®µä¸Šçš„æœ€ä¼˜è¦†ç›–ã€‚
ä¸‹é¢å…ˆè§£æé¢˜æ„â†’è¯´æ˜è´ªå¿ƒæ€æƒ³â†’å†ç»™å‡ºä»£ç ã€‚

------

**é¢˜æ„è§£æ**

æœ‰ N ä¸ªçªåœ¨ä¸€æ¡çº¿ä¸Šï¼Œæ¯ä¸ªçª i å¯¹åº”ä¸€ä¸ªæ•´æ•° ( a_i )ã€‚
å¦‚æœåœ¨çª i è£…æ‘„åƒå¤´ï¼Œå®ƒèƒ½è¦†ç›–åŒºé—´ï¼š
$
[i - a_i,, i + a_i]
$

ç›®æ ‡ï¼šç”¨å°½é‡å°‘çš„æ‘„åƒå¤´ï¼Œä½¿åŒºé—´ `[1, N]` è¢«å®Œå…¨è¦†ç›–ã€‚

çº¦æŸï¼š

- $( N \le 5\times 10^5 )$
- $( 0 \le a_i \le N )$
- å¿…é¡»çº¿æ€§æˆ– O(N log N) ç®—æ³•ã€‚

------

ğŸ’¡ **æ ¸å¿ƒæ€æƒ³ï¼šåŒºé—´è¦†ç›–è´ªå¿ƒï¼ˆInterval Covering Greedyï¼‰**

ç­‰ä»·äºï¼š

> ç»™å®šä¸€ç³»åˆ—åŒºé—´ `[L_i, R_i]`ï¼Œè¦è¦†ç›– `[1, N]`ï¼Œæ±‚æœ€å°‘åŒºé—´æ•°é‡ã€‚

ç»å…¸è´ªå¿ƒç­–ç•¥ï¼š

1. æŒ‰ **å·¦ç«¯ç‚¹ L å‡åº** æ’åºã€‚
2. ç”¨ä¸€ä¸ªå˜é‡ `rightmost` è¡¨ç¤ºå½“å‰å·²è¦†ç›–çš„æœ€å³ç«¯ã€‚
3. åœ¨èƒ½â€œæ¥ä¸Šå½“å‰è¦†ç›–åŒºé—´â€çš„æ‰€æœ‰å€™é€‰åŒºé—´ä¸­ï¼Œ**é€‰å³ç«¯ç‚¹ R æœ€å¤§çš„**é‚£ä¸€ä¸ªã€‚
4. æ¯å½“ `rightmost` æ— æ³•ç»§ç»­å»¶ä¼¸æ—¶ï¼Œæ–°å¢ä¸€ä¸ªåŒºé—´ï¼ˆæ‘„åƒå¤´ï¼‰ã€‚

æ—¶é—´å¤æ‚åº¦ O(N log N)ï¼Œå¦‚æœä¸æ’åºã€ç›´æ¥é¢„å¤„ç†æ¯ä¸ªä½ç½®çš„æœ€è¿œå¯è¾¾å³ç«¯ï¼Œä¹Ÿèƒ½åšåˆ° O(N)ã€‚

å†…å­˜: 96740kBï¼Œæ—¶é—´: 1040ms

```python
n = int(input())
a = list(map(int, input().split()))

# 1. è®¡ç®—æ¯ä¸ªä½ç½®çš„è¦†ç›–åŒºé—´
intervals = []
for i, x in enumerate(a, start=1):
    left = max(1, i - x)
    right = min(n, i + x)
    intervals.append((left, right))

# 2. æŒ‰å·¦ç«¯ç‚¹æ’åº
intervals.sort()

# 3. è´ªå¿ƒé€‰æ‹©æœ€å°‘åŒºé—´è¦†ç›– [1, N]
ans = 0
i = 0
covered = 0

while covered < n:
    best = covered
    # åœ¨æ‰€æœ‰èƒ½æ¥ä¸Šçš„åŒºé—´ä¸­ï¼Œé€‰å³ç«¯ç‚¹æœ€å¤§çš„
    while i < n and intervals[i][0] <= covered + 1:
        best = max(best, intervals[i][1])
        i += 1
    if best == covered:  # æ— æ³•å»¶ä¼¸
        break
    covered = best
    ans += 1

print(ans)
```

æ€è·¯è¯´æ˜

- `covered` æ˜¯å½“å‰è¦†ç›–çš„æœ€å³è¾¹ç•Œã€‚
- æ¯æ¬¡æ‰©å±•æ—¶ï¼š
  - æ‰¾æ‰€æœ‰ `L_i â‰¤ covered + 1` çš„åŒºé—´ã€‚
  - ä»ä¸­é€‰ `R_i` æœ€å¤§çš„é‚£ä¸€ä¸ªã€‚
  - æ›´æ–° `covered = R_i`ã€‚
  - è®¡æ•°å™¨ `ans += 1`ã€‚
- é‡å¤ç›´åˆ° `covered â‰¥ N`ã€‚



**è‹¥éœ€ çº¯ O(N) ç‰ˆæœ¬ï¼ˆæ— éœ€æ’åºï¼‰**

åˆ©ç”¨ã€Œå³ç«¯æœ€è¿œè¦†ç›–æ•°ç»„ã€ï¼š

å†…å­˜: 59472kBï¼Œæ—¶é—´: 627ms

```python
n = int(input())
a = list(map(int, input().split()))

far = [0] * (n + 2)
for i, x in enumerate(a, start=1):
    L = max(1, i - x)
    R = min(n, i + x)
    far[L] = max(far[L], R)

ans = 0
covered = 0
best = 0

for i in range(1, n + 1):
    best = max(best, far[i])
    if i > covered:
        ans += 1
        covered = best

print(ans)
```

è¿™ä¸ªå†™æ³•ç­‰ä»·äºâ€œè·³å°é˜¶å¼åŒºé—´æ‰©å±•â€ï¼Œéå¸¸ç²¾ç‚¼ã€çº¿æ€§å¤æ‚åº¦ï¼Œæ˜¯æ­¤ç±»é¢˜çš„æœ€ä¼˜æ¨¡æ¿ã€‚

------

âœ… æ€»ç»“å¯¹æ¯”

| ç‰¹å¾     | ä¼˜åŒ–ç‰ˆï¼ˆO(N log N)ï¼‰ | ä¼˜åŒ–ç‰ˆï¼ˆO(N)ï¼‰       |
| -------- | -------------------- | -------------------- |
| æ ¸å¿ƒæ€è·¯ | åŒºé—´è¦†ç›–æ ‡å‡†è´ªå¿ƒ     | çº¿æ€§æ‰«æå³ç«¯æœ€è¿œè¦†ç›– |
| å¤æ‚åº¦   | O(N log N)           | O(N)                 |
| ä»£ç é•¿åº¦ | 20è¡Œ                 | 15è¡Œ                 |
| å¯è¯»æ€§   | â˜…â˜…â˜…â˜…                 | â˜…â˜…â˜…â˜…â˜…                |
| æ˜¯å¦æ˜“è®° | æ˜¯                   | æ˜¯ï¼ˆæ¨èæ¨¡æ¿ï¼‰       |

------

**å»ºè®®**

ä»Šåé‡åˆ°ç±»ä¼¼é¢˜å‹ï¼ˆå¦‚â€œæœ€å°‘ç¯ç…§äº®é“è·¯â€â€œè¦†ç›–çº¿æ®µâ€ç­‰ï¼‰ï¼Œ
ç›´æ¥è®°ä¸‹é¢è¿™ä¸¤ç§æ¨¡æ¿ï¼š

- **æ’åºç‰ˆ**ï¼šé€‚åˆä»»æ„è¾“å…¥åŒºé—´ã€‚
- **çº¿æ€§ç‰ˆ**ï¼šé€‚åˆâ€œæŒ‰ä½ç½®å®šä¹‰åŒºé—´â€çš„é¢˜ã€‚





## 5 åŒºé—´åˆ†ç»„é—®é¢˜

### 5.1 é¢˜æ„æè¿°

**åŒºé—´åˆ†ç»„**é—®é¢˜å¤§æ¦‚é¢˜æ„å°±æ˜¯ï¼šç»™å‡ºä¸€å †åŒºé—´ï¼Œé—®æœ€å°‘å¯ä»¥å°†è¿™äº›åŒºé—´åˆ†æˆå¤šå°‘ç»„ä½¿å¾—æ¯ä¸ªç»„å†…çš„åŒºé—´äº’ä¸ç›¸äº¤ã€‚

å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š 

![img](https://pic2.zhimg.com/80/v2-6c6a045d481ddc44c66b046ef3e7d4cd_1440w.webp)

<center>åŒºé—´åˆ†ç»„é—®é¢˜ç¤ºä¾‹ï¼Œæœ€å°‘åˆ†æˆ3ä¸ªç»„</center>

### 5.2. è§£é¢˜æ­¥éª¤

ã€**æ­¥éª¤ä¸€**ã€‘ï¼šæŒ‰ç…§åŒºé—´å·¦ç«¯ç‚¹ä»å°åˆ°å¤§æ’åºã€‚

ã€**æ­¥éª¤äºŒ**ã€‘ï¼šä»**å‰å¾€å**ä¾æ¬¡æšä¸¾æ¯ä¸ªåŒºé—´ï¼Œåˆ¤æ–­å½“å‰åŒºé—´èƒ½å¦è¢«æ”¾åˆ°æŸä¸ªç°æœ‰ç»„é‡Œé¢ã€‚

ï¼ˆå³åˆ¤æ–­æ˜¯å¦å­˜åœ¨æŸä¸ªç»„çš„å³ç«¯ç‚¹åœ¨å½“å‰åŒºé—´ä¹‹ä¸­ã€‚å¦‚æœå¯ä»¥ï¼Œåˆ™ä¸èƒ½æ”¾åˆ°è¿™ä¸€ç»„ï¼‰

å‡è®¾ç°åœ¨å·²ç»åˆ†äº† m ç»„äº†ï¼Œç¬¬ k ç»„æœ€å³è¾¹çš„ä¸€ä¸ªç‚¹æ˜¯ $r_k$ï¼Œå½“å‰åŒºé—´çš„èŒƒå›´æ˜¯ $[L_i,R_i]$ ã€‚åˆ™ï¼š

å¦‚æœ$L_i \le r_k$ åˆ™è¡¨ç¤ºç¬¬ i ä¸ªåŒºé—´æ— æ³•æ”¾åˆ°ç¬¬ k ç»„é‡Œé¢ã€‚åä¹‹ï¼Œå¦‚æœ $L_i > r_k$ï¼Œ åˆ™è¡¨ç¤ºå¯ä»¥æ”¾åˆ°ç¬¬ k ç»„ã€‚

- å¦‚æœæ‰€æœ‰ m ä¸ªç»„é‡Œé¢æ²¡æœ‰ç»„å¯ä»¥æ¥æ”¶å½“å‰åŒºé—´ï¼Œåˆ™å½“å‰åŒºé—´æ–°å¼€ä¸€ä¸ªç»„ï¼Œå¹¶æŠŠè‡ªå·±æ”¾è¿›å»ã€‚
- å¦‚æœå­˜åœ¨å¯ä»¥æ¥æ”¶å½“å‰åŒºé—´çš„ç»„ kï¼Œåˆ™å°†å½“å‰åŒºé—´æ”¾è¿›å»ï¼Œå¹¶æ›´æ–°å½“å‰ç»„çš„ $r_k = R_i$ã€‚

**æ³¨æ„ï¼š**

ä¸ºäº†èƒ½å¿«é€Ÿçš„æ‰¾åˆ°èƒ½å¤Ÿæ¥æ”¶å½“å‰åŒºé—´çš„ç»„ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨**ä¼˜å…ˆé˜Ÿåˆ— ï¼ˆå°é¡¶å †ï¼‰**ã€‚

ä¼˜å…ˆé˜Ÿåˆ—é‡Œé¢è®°å½•æ¯ä¸ªç»„çš„å³ç«¯ç‚¹å€¼ï¼Œæ¯æ¬¡å¯ä»¥åœ¨ O(1) çš„æ—¶é—´æ‹¿åˆ°å³ç«¯ç‚¹ä¸­çš„çš„æœ€å°å€¼ã€‚



### ç»ƒä¹ NC147 ä¸»æŒäººè°ƒåº¦

https://www.nowcoder.com/questionTerminal/4edf6e6d01554870a12f218c94e8a299

æœ‰ n ä¸ªæ´»åŠ¨å³å°†ä¸¾åŠï¼Œæ¯ä¸ªæ´»åŠ¨éƒ½æœ‰å¼€å§‹æ—¶é—´ä¸æ´»åŠ¨çš„ç»“æŸæ—¶é—´ï¼Œç¬¬ i ä¸ªæ´»åŠ¨çš„å¼€å§‹æ—¶é—´æ˜¯ starti ,ç¬¬ i ä¸ªæ´»åŠ¨çš„ç»“æŸæ—¶é—´æ˜¯ endi ,ä¸¾åŠæŸä¸ªæ´»åŠ¨å°±éœ€è¦ä¸ºè¯¥æ´»åŠ¨å‡†å¤‡ä¸€ä¸ªæ´»åŠ¨ä¸»æŒäººã€‚

ä¸€ä½æ´»åŠ¨ä¸»æŒäººåœ¨åŒä¸€æ—¶é—´åªèƒ½å‚ä¸ä¸€ä¸ªæ´»åŠ¨ã€‚å¹¶ä¸”æ´»åŠ¨ä¸»æŒäººéœ€è¦å…¨ç¨‹å‚ä¸æ´»åŠ¨ï¼Œæ¢å¥è¯è¯´ï¼Œä¸€ä¸ªä¸»æŒäººå‚ä¸äº†ç¬¬ i ä¸ªæ´»åŠ¨ï¼Œé‚£ä¹ˆè¯¥ä¸»æŒäººåœ¨ (starti,endi) è¿™ä¸ªæ—¶é—´æ®µä¸èƒ½å‚ä¸å…¶ä»–ä»»ä½•æ´»åŠ¨ã€‚æ±‚ä¸ºäº†æˆåŠŸä¸¾åŠè¿™ n ä¸ªæ´»åŠ¨ï¼Œæœ€å°‘éœ€è¦å¤šå°‘åä¸»æŒäººã€‚

æ•°æ®èŒƒå›´: $1â‰¤nâ‰¤10^5 ï¼Œ âˆ’2^{32}â‰¤start_iâ‰¤end_iâ‰¤2^{31}$

å¤æ‚åº¦è¦æ±‚ï¼šæ—¶é—´å¤æ‚åº¦ O(nlogâ¡n) ï¼Œç©ºé—´å¤æ‚åº¦ O(n)

ç¤ºä¾‹1

**è¾“å…¥**

```
2,[[1,2],[2,3]]
```

**è¾“å‡º**

```
1
```

è¯´æ˜

```
åªéœ€è¦ä¸€ä¸ªä¸»æŒäººå°±èƒ½æˆåŠŸä¸¾åŠè¿™ä¸¤ä¸ªæ´»åŠ¨      
```

ç¤ºä¾‹2

è¾“å…¥

```
2,[[1,3],[2,4]]
```

è¾“å‡º

```
2
```

è¯´æ˜

```
éœ€è¦ä¸¤ä¸ªä¸»æŒäººæ‰èƒ½æˆåŠŸä¸¾åŠè¿™ä¸¤ä¸ªæ´»åŠ¨      
```

å¤‡æ³¨:

```
1â‰¤nâ‰¤10^5
starti,endiåœ¨intèŒƒå›´å†…
```





è§£æ³•1: å°†æ¯ä¸ªæ´»åŠ¨çš„å¼€å§‹æ—¶é—´å’Œç»“æŸæ—¶é—´è½¬æ¢ä¸ºäº‹ä»¶

```python
from typing import List

class Solution:
    def minmumNumberOfHost(self, n: int, startEnd: List[List[int]]) -> int:
        # å°†æ¯ä¸ªæ´»åŠ¨çš„å¼€å§‹æ—¶é—´å’Œç»“æŸæ—¶é—´è½¬æ¢ä¸ºäº‹ä»¶
        events = []
        for i in range(n):
            start, end = startEnd[i]
            events.append((start, 1))  # æ´»åŠ¨å¼€å§‹ï¼Œ+1ä¸»æŒäºº
            events.append((end, -1))  # æ´»åŠ¨ç»“æŸï¼Œ-1ä¸»æŒäºº

        # å¯¹äº‹ä»¶æŒ‰ç…§æ—¶é—´æ’åºï¼Œå¦‚æœæ—¶é—´ç›¸åŒï¼Œå…ˆå¤„ç†ç»“æŸäº‹ä»¶
        events.sort(key=lambda x: (x[0], x[1]))

        min_hosts = 0
        current_hosts = 0

        # éå†æ‰€æœ‰äº‹ä»¶ï¼Œè®¡ç®—éœ€è¦çš„ä¸»æŒäººæ•°
        for time, event in events:
            current_hosts += event
            min_hosts = max(min_hosts, current_hosts)

        return min_hosts

# ç¤ºä¾‹ç”¨æ³•

#sol = Solution()
#print(sol.minimum_number_of_host(3, [[1, 5], [2, 7], [4, 5]]))  # è¾“å‡ºåº”ä¸º 2
#print(sol.minimum_number_of_host(34,[[547,612],[417,551],[132,132],[168,446],[95,747],[187,908],[115,712],[15,329],[612,900],[3,509],[181,200],[562,787],[136,268],[36,784],[533,573],[165,946],[343,442],[127,725],[557,991],[604,613],[633,721],[287,847],[414,480],[428,698],[437,616],[475,932],[652,886],[19,992],[132,543],[390,869],[754,903],[284,925],[511,951],[272,739]]))
```



è§£æ³•2:

```python
from typing import List
import heapq

class Solution:
    def minmumNumberOfHost(self, n: int, startEnd: List[List[int]]) -> int:
        # æŒ‰å·¦ç«¯ç‚¹ä»å°åˆ°å¤§æ’åº
        startEnd.sort(key=lambda x: x[0])

        # åˆ›å»ºå°é¡¶å †
        q = []

        for i in range(n):
            if not q or q[0] > startEnd[i][0]:
                heapq.heappush(q, startEnd[i][1])
            else:
                heapq.heappop(q)
                heapq.heappush(q, startEnd[i][1])

        return len(q)
```





è§£æ³•3:

å°†æ´»åŠ¨å¼€å§‹æ—¶é—´å†™å…¥ä¸€ä¸ªåˆ—è¡¨startsï¼Œè¿›è¡Œæ’åºã€‚ 

å°†æ´»åŠ¨ç»“æŸæ—¶é—´å†™å…¥ä¸€ä¸ªåˆ—è¡¨endsï¼Œè¿›è¡Œæ’åºã€‚ 

æ¯æ¬¡æ´»åŠ¨å¼€å§‹æ—¶ï¼Œéœ€è¦å¢åŠ ä¸€ä¸ªä¸»æŒäººä¸Šåœºï¼Œæ¯æ¬¡æ´»åŠ¨ç»“æŸæ—¶å€™å¯ä»¥é‡Šæ”¾ä¸€ä¸ªä¸»æŒäººã€‚ 

æ‰€ä»¥æŒ‰ç…§æ—¶é—´å…ˆåé¡ºåºå¯¹startsè¿›è¡Œéå†ï¼Œæ¯æ¬¡æœ‰æ´»åŠ¨å¼€å§‹count++ï¼Œæ¯æ¬¡æœ‰æ´»åŠ¨ç»“æŸcount-- 

åœ¨countæœ€å¤§çš„æ—¶å€™ï¼Œå³æ˜¯éœ€è¦ä¸»æŒäººæœ€å¤šçš„æ—¶å€™

```python
class Solution:
    def minmumNumberOfHost(self , n , startEnd ):
        starts=[]
        ends=[]
        for start,end in startEnd:
            starts.append(start);
            ends.append(end);
            
        starts.sort();
        ends.sort()
        
        i,j,count,res=0,0,0,0
        for time in starts:
            while(i<n and starts[i]<=time):
                i+=1
                count+=1
            while(j<n and ends[j]<=time):
                j+=1
                count-=1
            if res<count:
                res=count
        return res
```





# ä¸‰ã€Pythonåå¤§æ’åºç®—æ³•æºç 

> Logs:
>
> 2024/10/22 å–è‡ª, https://github.com/GMyhf/2024spring-cs201/blob/main/code/ten_sort_algorithms.md



## 1 å‰è¨€

ç»å¸¸ç”¨åˆ°å„ç§æ’åºç®—æ³•ï¼Œä½†æ˜¯ç½‘ä¸Šçš„Pythonæ’åºæºç è´¨é‡å‚å·®ä¸é½ã€‚å› æ­¤ç»“åˆç½‘ä¸Šçš„èµ„æ–™å’Œä¸ªäººç†è§£ï¼Œæ•´ç†äº†ä¸€ä»½å¯ç›´æ¥ä½¿ç”¨çš„æ’åºç®—æ³•Pythonæºç ã€‚

åŒ…æ‹¬ï¼šå†’æ³¡æ’åºï¼ˆBubble Sortï¼‰ï¼Œæ’å…¥æ’åºï¼ˆInsertion Sortï¼‰ï¼Œé€‰æ‹©æ’åºï¼ˆSelection Sortï¼‰ï¼Œå¸Œå°”æ’åºï¼ˆShell Sortï¼‰ï¼Œå½’å¹¶æ’åºï¼ˆMerge Sortï¼‰ï¼Œå¿«é€Ÿæ’åºï¼ˆQuick Sortï¼‰ï¼Œå †æ’åºï¼ˆHeap Sortï¼‰ï¼Œè®¡æ•°æ’åºï¼ˆCounting Sortï¼‰ï¼Œæ¡¶æ’åºï¼ˆBucket Sortï¼‰ï¼ŒåŸºæ•°æ’åºï¼ˆRadix Sortï¼‰

## 2 æ’åºç®—æ³•çš„é€‰å–è§„åˆ™

é€‰æ‹©åˆé€‚çš„æ’åºç®—æ³•å–å†³äºå¤šç§å› ç´ ï¼ŒåŒ…æ‹¬æ•°æ®çš„è§„æ¨¡ã€ç‰¹æ€§ã€æ€§èƒ½è¦æ±‚ã€ç¨³å®šæ€§è¦æ±‚ã€å†…å­˜é™åˆ¶ç­‰ã€‚

**æ•°æ®è§„æ¨¡**

å°è§„æ¨¡ï¼Œé€šå¸¸æŒ‡æ•°æ®é‡åœ¨å‡ åƒåˆ°å‡ ä¸‡ä¸ªå…ƒç´ ã€‚å†’æ³¡æ’åºã€æ’å…¥æ’åºã€é€‰æ‹©æ’åºã€‚
ä¸­è§„æ¨¡æ•°æ®ï¼Œé€šå¸¸æŒ‡æ•°æ®é‡åœ¨å‡ ä¸‡åˆ°å‡ ç™¾ä¸‡ä¸ªå…ƒç´ ã€‚å¸Œå°”æ’åºã€å¿«é€Ÿæ’åºã€å½’å¹¶æ’åºã€‚
å¤§è§„æ¨¡æ•°æ®ï¼Œé€šå¸¸æŒ‡æ•°æ®é‡åœ¨å‡ ç™¾ä¸‡åˆ°å‡ äº¿ç”šè‡³æ›´å¤šä¸ªå…ƒç´ ã€‚å½’å¹¶æ’åºã€å¿«é€Ÿæ’åºã€å †æ’åºã€å¤–éƒ¨æ’åºã€åˆ†å¸ƒå¼æ’åºã€‚

**æ•°æ®ç‰¹æ€§**

å‡ ä¹æœ‰åºï¼šæ’å…¥æ’åºã€‚

æ•°æ®èŒƒå›´å°ï¼šè®¡æ•°æ’åºã€‚

æ•°æ®åˆ†å¸ƒå‡åŒ€ï¼šæ¡¶æ’åºã€‚

å›ºå®šé•¿åº¦çš„æ•´æ•°æˆ–å­—ç¬¦ä¸²ï¼šåŸºæ•°æ’åºã€‚

**æ€§èƒ½è¦æ±‚**

é«˜æ—¶é—´æ•ˆç‡ï¼šå½’å¹¶æ’åºã€å¿«é€Ÿæ’åºã€å †æ’åºã€‚

ä½ç©ºé—´å¤æ‚åº¦ï¼šé€‰æ‹©æ’åºã€å †æ’åºã€‚

**ç¨³å®šæ€§è¦æ±‚**

éœ€è¦ç¨³å®šæ’åºï¼šå½’å¹¶æ’åºã€è®¡æ•°æ’åºã€åŸºæ•°æ’åºã€æ¡¶æ’åºã€æ’å…¥æ’åºã€å†’æ³¡æ’åºã€‚

**å†…å­˜é™åˆ¶**

å†…å­˜æœ‰é™ï¼šé€‰æ‹©æ’åºã€å †æ’åºã€‚



**Comparison sorts**

åœ¨æ’åºç®—æ³•ä¸­ï¼Œç¨³å®šæ€§æ˜¯æŒ‡ç›¸ç­‰å…ƒç´ çš„ç›¸å¯¹é¡ºåºæ˜¯å¦åœ¨æ’åºåä¿æŒä¸å˜ã€‚æ¢å¥è¯è¯´ï¼Œå¦‚æœæ’åºç®—æ³•åœ¨æ’åºè¿‡ç¨‹ä¸­ä¿æŒäº†ç›¸ç­‰å…ƒç´ çš„ç›¸å¯¹é¡ºåºï¼Œåˆ™ç§°è¯¥ç®—æ³•æ˜¯ç¨³å®šçš„ï¼Œå¦åˆ™æ˜¯ä¸ç¨³å®šçš„ã€‚

å¯¹äºåˆ¤æ–­ä¸€ä¸ªæ’åºç®—æ³•æ˜¯å¦ç¨³å®šï¼Œä¸€ç§å¸¸è§çš„æ–¹æ³•æ˜¯è§‚å¯Ÿäº¤æ¢æ“ä½œã€‚æŒ¨ç€äº¤æ¢ï¼ˆç›¸é‚»å…ƒç´ äº¤æ¢ï¼‰æ˜¯ç¨³å®šçš„ï¼Œè€Œéš”ç€äº¤æ¢ï¼ˆè·³è·ƒå¼äº¤æ¢ï¼‰å¯èƒ½ä¼šå¯¼è‡´ä¸ç¨³å®šæ€§ã€‚

Below is a table of [comparison sorts](https://en.wikipedia.org/wiki/Comparison_sort). A comparison sort cannot perform better than O(n log n) on average.

|        Name         |  Best   |  Average  |   Worst   | Memory | Stable |       Method        |                         Other notes                          |
| :-----------------: | :-----: | :-------: | :-------: | :----: | :----: | :-----------------: | :----------------------------------------------------------: |
| In-place merge sort |    â€”    |     â€”     | $nlog^2n$ |   1    |  Yes   |       Merging       | Can be implemented as a stable sort based on stable in-place merging. |
|      Heapsort       | $nlogn$ |  $nlogn$  |  $nlogn$  |   1    |   No   |      Selection      |                                                              |
|     Merge sort      | $nlogn$ |  $nlogn$  |  $nlogn$  |  *n*   |  Yes   |       Merging       | Highly parallelizable (up to *O*(log *n*) using the Three Hungarian's Algorithm) |
|       Timsort       |   *n*   |  $nlogn$  |  $nlogn$  |  *n*   |  Yes   | Insertion & Merging | Makes *n-1* comparisons when the data is already sorted or reverse sorted. |
|      Quicksort      | $nlogn$ |  $nlogn$  |   $n^2$   | $logn$ |   No   |    Partitioning     | Quicksort is usually done in-place with *O*(log *n*) stack space. |
|      Shellsort      | $nlogn$ | $n^{4/3}$ | $n^{3/2}$ |   1    |   No   |      Insertion      |                       Small code size.                       |
|   Insertion sort    |   *n*   |   $n^2$   |   $n^2$   |   1    |  Yes   |      Insertion      | *O*(n + d), in the worst case over sequences that have *d* inversions. |
|     Bubble sort     |   *n*   |   $n^2$   |   $n^2$   |   1    |  Yes   |     Exchanging      |                       Tiny code size.                        |
|   Selection sort    |  $n^2$  |   $n^2$   |   $n^2$   |   1    |   No   |      Selection      | Stable with O(n) extra space, when using linked lists, or when made as a variant of Insertion Sort instead of swapping the two items. |



Highly tuned implementations use more sophisticated variants, such as [Timsort](https://en.wikipedia.org/wiki/Timsort) (merge sort, insertion sort, and additional logic), used in [Android](https://en.wikipedia.org/wiki/Android_(operating_system)), [Java](https://en.wikipedia.org/wiki/Java_(programming_language)), and [Python](https://en.wikipedia.org/wiki/Python_(programming_language)), and [introsort](https://en.wikipedia.org/wiki/Introsort) (quicksort and heapsort), used (in variant forms) in some [C++ sort](https://en.wikipedia.org/wiki/Sort_(C%2B%2B)) implementations and in [.NET](https://en.wikipedia.org/wiki/.NET).



è®¡æ•°æ’åºï¼Œæ—¶é—´å¤æ‚åº¦ï¼š$O(n + k)$ï¼Œå…¶ä¸­ k æ˜¯æ•°æ®èŒƒå›´ã€‚ç©ºé—´å¤æ‚åº¦ï¼š$O(k)$ã€‚ç¨³å®šã€‚é€‚ç”¨äºæ•°æ®èŒƒå›´è¾ƒå°ä¸”æ•°æ®åˆ†å¸ƒå‡åŒ€çš„æƒ…å†µã€‚

æ¡¶æ’åºï¼Œæ—¶é—´å¤æ‚åº¦ï¼šå¹³å‡æƒ…å†µ$O(n+k)$ï¼Œæœ€åæƒ…å†µ$O(n^2)$ã€‚ç©ºé—´å¤æ‚åº¦ï¼š$O(n+k)$ã€‚ç¨³å®šã€‚é€‚ç”¨äºæ•°æ®åˆ†å¸ƒå‡åŒ€ä¸”å·²çŸ¥æ•°æ®èŒƒå›´çš„æƒ…å†µã€‚

åŸºæ•°æ’åºï¼Œæ—¶é—´å¤æ‚åº¦ï¼š$O(nk)$ï¼Œå…¶ä¸­ k æ˜¯æ•°å­—çš„ä½æ•°ã€‚ç©ºé—´å¤æ‚åº¦ï¼š$O(n+k)$ã€‚ç¨³å®šã€‚é€‚ç”¨äºæ•°æ®èŒƒå›´è¾ƒå¤§ä½†ä½æ•°è¾ƒå°‘çš„æƒ…å†µï¼Œä¾‹å¦‚å›ºå®šé•¿åº¦çš„æ•´æ•°æˆ–å­—ç¬¦ä¸²ã€‚



## 3 åå¤§æ’åºç®—æ³•çš„Pythonæºç 

### 3.1 å†’æ³¡æ’åº$$(Bubble$$ $$Sort)$$

æ–¹æ³•ï¼š é€šè¿‡é‡å¤åœ°éå†è¦æ’åºçš„åˆ—è¡¨ï¼Œæ¯”è¾ƒç›¸é‚»çš„å…ƒç´ å¹¶æ ¹æ®éœ€è¦äº¤æ¢å®ƒä»¬çš„ä½ç½®æ¥å®ç°æ’åºã€‚ï¼ˆæ¯”è¾ƒæ¬¡æ•°å¤šï¼Œäº¤æ¢æ¬¡æ•°å¤šï¼‰
ä¸»è¦æ€æƒ³ï¼š å‰åä¸¤ä¸¤æ¯”è¾ƒï¼Œå¤§å°é¡ºåºé”™è¯¯å°±äº¤æ¢ä½ç½®

ä»£ç æ€è·¯ï¼š

1. æ¯”è¾ƒç›¸é‚»å…ƒç´ ï¼Œå¦‚æœå‰è€…å¤§äºåè€…ï¼Œå°±äº¤æ¢ä½ç½®ã€‚
2. ä»é˜Ÿé¦–åˆ°é˜Ÿå°¾ï¼Œæ¯ä¸€å¯¹ç›¸é‚»å…ƒç´ éƒ½é‡å¤ä¸Šè¿°æ­¥éª¤ï¼Œæœ€åä¸€ä¸ªå…ƒç´ ä¸ºæœ€å¤§å…ƒç´ ã€‚
3. é’ˆå¯¹å‰n-1ä¸ªå…ƒç´ é‡å¤ã€‚

```python
def BubbleSort(arr):
    for i in range(len(arr) - 1):
        for j in range(len(arr) - i - 1):
            if arr[j] > arr[j + 1]:
                arr[j], arr[j + 1] = arr[j + 1], arr[j]
    return arr

if __name__ == "__main__":
    arr_in = [6, 5, 18, 2, 16, 15, 19, 13, 10, 12, 7, 9, 4, 4, 8, 1, 11, 14, 3, 20, 17, 10]
    print(arr_in)
    arr_out = BubbleSort(arr_in)
    print(arr_out)
```

æ—¶é—´å¤æ‚åº¦ï¼šå¹³å‡å’Œæœ€åæƒ…å†µ$O(n^2)$ï¼Œæœ€å¥½æƒ…å†µ$O(n)$
ç©ºé—´å¤æ‚åº¦ï¼š$O(1)$
ç¨³å®šæ’åºã€‚é€‚ç”¨äºå°è§„æ¨¡æ•°æ®æˆ–å‡ ä¹æœ‰åºçš„æ•°æ®ã€‚



æ”¹è¿›åçš„å†’æ³¡æ’åºæ˜¯å¯¹åŸå§‹å†’æ³¡æ’åºçš„ä¸€ç§ä¼˜åŒ–ã€‚åŸå§‹å†’æ³¡æ’åºçš„åŸºæœ¬æ€æƒ³æ˜¯ä¾æ¬¡æ¯”è¾ƒç›¸é‚»çš„ä¸¤ä¸ªå…ƒç´ ï¼Œå¦‚æœå®ƒä»¬çš„é¡ºåºé”™è¯¯å°±äº¤æ¢å®ƒä»¬ï¼Œç›´åˆ°æ²¡æœ‰éœ€è¦äº¤æ¢çš„å…ƒç´ ä¸ºæ­¢ã€‚è¿™æ ·çš„ç®—æ³•æ•ˆç‡è¾ƒä½ï¼Œå› ä¸ºå³ä½¿åºåˆ—å·²ç»æœ‰åºï¼Œå®ƒä»ç„¶éœ€è¦è¿›è¡Œå¤šè½®çš„æ¯”è¾ƒå’Œäº¤æ¢ã€‚

æ”¹è¿›åçš„å†’æ³¡æ’åºé€šè¿‡å¢åŠ ä¸€ä¸ªæ ‡å¿—ä½æ¥ä¼˜åŒ–ã€‚åœ¨æ¯ä¸€è½®æ¯”è¾ƒä¸­ï¼Œå¦‚æœæ²¡æœ‰å‘ç”Ÿä»»ä½•äº¤æ¢ï¼Œè¯´æ˜åºåˆ—å·²ç»æœ‰åºï¼Œä¸éœ€è¦å†è¿›è¡Œåç»­çš„æ¯”è¾ƒï¼Œå› æ­¤å¯ä»¥æå‰ç»“æŸæ’åºè¿‡ç¨‹ã€‚

æ”¹è¿›åçš„å†’æ³¡æ’åºå®ç°å¦‚ä¸‹æ‰€ç¤ºï¼š

```python
def bubble_sort(arr):
    n = len(arr)
    for i in range(n):
        # æ ‡è®°æ˜¯å¦å‘ç”Ÿäº†äº¤æ¢
        swapped = False
        for j in range(0, n - i - 1):
            if arr[j] > arr[j + 1]:
                # äº¤æ¢å…ƒç´ 
                arr[j], arr[j + 1] = arr[j + 1], arr[j]
                swapped = True
        # å¦‚æœæ²¡æœ‰å‘ç”Ÿäº¤æ¢ï¼Œè¯´æ˜æ•°ç»„å·²ç»æ’åºå®Œæˆ
        if not swapped:
            break
    return arr
```

åœ¨è¿™ä¸ªæ”¹è¿›åçš„å†’æ³¡æ’åºç®—æ³•ä¸­ï¼Œå¦‚æœåœ¨ä¸€è½®æ¯”è¾ƒä¸­æ²¡æœ‰å‘ç”Ÿä»»ä½•äº¤æ¢ï¼Œå°±å°†æ ‡å¿—ä½ `swapped` è®¾ç½®ä¸º `False`ï¼Œå¹¶æå‰è·³å‡ºå¾ªç¯ï¼Œä»è€Œå‡å°‘äº†ä¸å¿…è¦çš„æ¯”è¾ƒæ¬¡æ•°ï¼Œæé«˜äº†æ•ˆç‡ã€‚



### 3.2 é€‰æ‹©æ’åº$$(Selection$$ $$Sort)$$

æ–¹æ³•ï¼šåœ¨æ— åºåŒºæ‰¾åˆ°æœ€å°çš„å…ƒç´ æ”¾åˆ°æœ‰åºåŒºçš„é˜Ÿå°¾ï¼ˆæ¯”è¾ƒæ¬¡æ•°å¤šï¼Œäº¤æ¢æ¬¡æ•°å°‘ï¼‰
ä¸»è¦æ€æƒ³ï¼šæ°´æœæ‘ŠæŒ‘è‹¹æœï¼Œå…ˆé€‰å‡ºæœ€å¤§çš„ï¼Œå†é€‰å‡ºæ¬¡å¤§çš„ï¼Œç›´åˆ°æœ€åã€‚
é€‰æ‹©æ˜¯å¯¹å†’æ³¡çš„ä¼˜åŒ–ï¼Œæ¯”è¾ƒä¸€è½®åªäº¤æ¢ä¸€æ¬¡æ•°æ®ã€‚

ä»£ç æ€è·¯ï¼š

1. æ‰¾åˆ°æ— åºå¾…æ’åºåˆ—ä¸­æœ€å°çš„å…ƒç´ ï¼Œå’Œç¬¬ä¸€ä¸ªå…ƒç´ äº¤æ¢ä½ç½®ã€‚
2. å‰©ä¸‹çš„å¾…æ’æ— åºåºåˆ—ï¼ˆ2-nï¼‰é€‰å‡ºæœ€å°çš„å…ƒç´ ï¼Œå’Œç¬¬äºŒä¸ªå…ƒç´ äº¤æ¢ä½ç½®ã€‚
3. ç›´åˆ°æœ€åé€‰æ‹©å®Œæˆã€‚

```python
def SelectSort(arr):
    for i in range(len(arr)):
        minIndex = i
        for j in range(i + 1, len(arr)):
            if arr[j] < arr[minIndex]:
               minIndex = j
        arr[i], arr[minIndex] = arr[minIndex], arr[i]
    return arr

if __name__ == "__main__":
    arr_in = [6, 5, 18, 2, 16, 15, 19, 13, 10, 12, 7, 9, 4, 4, 8, 1, 11, 14, 3, 20, 17, 10]
    print(arr_in)
    arr_out = SelectSort(arr_in)
    print(arr_out)
```

æ—¶é—´å¤æ‚åº¦ï¼š$O(n^2)$
ç©ºé—´å¤æ‚åº¦ï¼š$O(1)$
éç¨³å®šæ’åº



### 3.3 æ’å…¥æ’åº$$(Insertion$$ $$Sort)$$

æ–¹æ³•ï¼šæŠŠæ— åºåŒºçš„ç¬¬ä¸€ä¸ªå…ƒç´ æ’å…¥åˆ°æœ‰åºåŒºçš„åˆé€‚ä½ç½®ï¼ˆæ¯”è¾ƒæ¬¡æ•°å°‘ï¼Œäº¤æ¢æ¬¡æ•°å¤šï¼‰
ä¸»è¦æ€æƒ³ï¼šæ‰‘å…‹ç‰Œæ‰“ç‰Œæ—¶çš„æ’å…¥æ€æƒ³ï¼Œé€ä¸ªæ’å…¥åˆ°å‰é¢çš„æœ‰åºæ•°ä¸­ã€‚

ä»£ç æ€è·¯ï¼š

1. é€‰æ‹©å¾…æ’æ— åºåºåˆ—çš„ç¬¬ä¸€ä¸ªå…ƒç´ ä½œä¸ºæœ‰åºæ•°åˆ—çš„ç¬¬ä¸€ä¸ªå…ƒç´ ã€‚
2. æŠŠç¬¬2ä¸ªå…ƒç´ åˆ°æœ€åä¸€ä¸ªå…ƒç´ çœ‹åšæ— åºå¾…æ’åºåˆ—ã€‚
3. ä¾æ¬¡ä»å¾…æ’æ— åºåºåˆ—å–å‡ºæ¯ä¸€ä¸ªå…ƒç´ ï¼Œ<mark>ä¸æœ‰åºåºåˆ—çš„æ¯ä¸ªå…ƒç´ æ¯”è¾ƒï¼ˆä»å³å‘å·¦æ‰«æï¼‰</mark>ï¼Œç¬¦åˆæ¡ä»¶äº¤æ¢å…ƒç´ ä½ç½®ã€‚

```python
def InsertSort(arr):
    for i in range(1, len(arr)):
        for j in range(i, 0, -1):
            if arr[j] < arr[j - 1]:
                arr[j], arr[j - 1] = arr[j - 1], arr[j]
    return arr

if __name__ == "__main__":
    arr_in = [6, 5, 18, 2, 16, 15, 19, 13, 10, 12, 7, 9, 4, 4, 8, 1, 11, 14, 3, 20, 17, 10]
    print(arr_in)
    arr_out = InsertSort(arr_in)
    print(arr_out)
```

æ—¶é—´å¤æ‚åº¦ï¼š$O(n^2)$
ç©ºé—´å¤æ‚åº¦ï¼š$O(1)$
ç¨³å®šæ’åº



ä¸Šé¢ä»£ç å¹¶æ²¡æœ‰åœ¨æ‰¾åˆ°æ­£ç¡®ä½ç½®åç«‹å³åœæ­¢å¾ªç¯ï¼Œè€Œæ˜¯ä¸€ç›´å¾ªç¯ç›´åˆ°å†…éƒ¨çš„ for å¾ªç¯å®Œæˆã€‚

æ”¹è¿›åçš„æ’å…¥æ’åºåº”è¯¥åœ¨æ‰¾åˆ°æ­£ç¡®ä½ç½®åç«‹å³åœæ­¢å¾ªç¯ã€‚è¦å®ç°è¿™ä¸€ç‚¹ï¼Œå¯ä»¥åœ¨å†…éƒ¨çš„ for å¾ªç¯ä¸­æ·»åŠ ä¸€ä¸ªåˆ¤æ–­æ¡ä»¶æ¥åˆ¤æ–­æ˜¯å¦éœ€è¦ç»§ç»­äº¤æ¢ã€‚å¦‚æœå½“å‰å…ƒç´ å·²ç»å¤§äºï¼ˆæˆ–ç­‰äºï¼‰å‰ä¸€ä¸ªå…ƒç´ ï¼Œå°±å¯ä»¥åœæ­¢å†…éƒ¨çš„å¾ªç¯äº†ã€‚

ä¸‹é¢æ˜¯ä¸€ä¸ªæ”¹è¿›çš„æ’å…¥æ’åºç‰ˆæœ¬ï¼š

```python
def InsertSort(arr):
    for i in range(1, len(arr)):
        key = arr[i]
        j = i - 1
        while j >= 0 and key < arr[j]:
            arr[j + 1] = arr[j]
            j -= 1
        arr[j + 1] = key
    return arr

if __name__ == "__main__":
    arr_in = [6, 5, 18, 2, 16, 15, 19, 13, 10, 12, 7, 9, 4, 4, 8, 1, 11, 14, 3, 20, 17, 10]
    print(arr_in)
    arr_out = InsertSort(arr_in)
    print(arr_out)
```

è¿™ä¸ªç‰ˆæœ¬çš„æ’å…¥æ’åºç®—æ³•åœ¨æ‰¾åˆ°æ­£ç¡®ä½ç½®åä¼šç«‹å³åœæ­¢å†…éƒ¨çš„å¾ªç¯ï¼Œä»è€Œæé«˜äº†æ•ˆç‡ã€‚



### 3.4 å¸Œå°”æ’åº$$(Shell$$ $$Sort)$$

å¸Œå°”æ’åºæ˜¯æ’å…¥æ’åºçš„ä¸€ç§æ›´é«˜æ•ˆçš„æ”¹è¿›ç‰ˆæœ¬ï¼Œå…¶æ ¸å¿ƒæ€æƒ³æ˜¯å°†å¾…æ’åºæ•°ç»„åˆ†å‰²æˆè‹¥å¹²ä¸ªå­åºåˆ—ï¼Œç„¶åå¯¹å„ä¸ªå­åºåˆ—è¿›è¡Œæ’å…¥æ’åºï¼Œæœ€åå†å¯¹æ•´ä¸ªåºåˆ—è¿›è¡Œä¸€æ¬¡æ’å…¥æ’åºã€‚å¸Œå°”æ’åºçš„å…³é”®åœ¨äºé€‰æ‹©åˆé€‚çš„é—´éš”åºåˆ—ï¼Œä»¥ä¿è¯æœ€ç»ˆçš„æ’åºæ•ˆç‡ã€‚

ä»£ç æ€è·¯ï¼š

1. é€‰æ‹©ä¸€ä¸ªå¢é‡åºåˆ—t1ï¼Œt2ï¼Œâ€¦ï¼Œtkï¼Œå…¶ä¸­ti>tjï¼Œtk=1ã€‚
2. æŒ‰å¢é‡åºåˆ—ä¸ªæ•°kï¼Œå¯¹åºåˆ—è¿›è¡Œkè¶Ÿæ’åºã€‚
3. æ¯è¶Ÿæ’åºï¼Œæ ¹æ®å¯¹åº”çš„å¢é‡tiï¼Œå°†å¾…æ’åºåºåˆ—åˆ†å‰²æˆè‹¥å¹²é•¿åº¦ä¸ºmçš„å­åºåˆ—ï¼Œåˆ†åˆ«å¯¹å„å­è¡¨è¿›è¡Œç›´æ¥æ’å…¥æ’åºã€‚ä»…å¢é‡å› å­ä¸º1æ—¶ï¼Œæ•´ä¸ªåºåˆ—ä½œä¸ºä¸€ä¸ªè¡¨æ¥å¤„ç†ï¼Œè¡¨é•¿åº¦å³ä¸ºæ•´ä¸ªåºåˆ—çš„é•¿åº¦ã€‚

```python
def ShellSort(arr):
    n = len(arr)
    gap = n // 2
    while gap > 0:
        for i in range(gap, n):
            temp = arr[i]
            j = i
            while j >= gap and arr[j - gap] > temp:
                arr[j] = arr[j - gap]
                j -= gap
            arr[j] = temp
        gap //= 2
    return arr

if __name__ == "__main__":
    arr_in = [6, 5, 18, 2, 16, 15, 19, 13, 10, 12, 7, 9, 4, 4, 8, 1, 11, 14, 3, 20, 17, 10]
    print(arr_in)
    arr_out = ShellSort(arr_in)
    print(arr_out)
```

ç©ºé—´å¤æ‚åº¦ï¼š$O(1)$
éç¨³å®šæ’åº

å¸Œå°”æ’åºçš„æ—¶é—´å¤æ‚åº¦å–å†³äºæ‰€ä½¿ç”¨çš„å¢é‡åºåˆ—ã€‚æ²¡æœ‰ä¸€ä¸ªç»Ÿä¸€çš„æœ€ä½³å¢é‡åºåˆ—ï¼Œä¸åŒçš„å¢é‡åºåˆ—ä¼šå¯¼è‡´ä¸åŒçš„æ—¶é—´å¤æ‚åº¦ã€‚ç„¶è€Œï¼Œé€šå¸¸æƒ…å†µä¸‹ï¼Œå¸Œå°”æ’åºçš„æ—¶é—´å¤æ‚åº¦å¯ä»¥æè¿°å¦‚ä¸‹ï¼š

- æœ€åæƒ…å†µæ—¶é—´å¤æ‚åº¦ï¼š$O(n^2)$ï¼Œè¿™é€šå¸¸å‘ç”Ÿåœ¨æŸäº›ç‰¹å®šçš„å¢é‡åºåˆ—ä¸Šã€‚
- å¹³å‡æƒ…å†µæ—¶é—´å¤æ‚åº¦ï¼šæ ¹æ®ä¸åŒçš„å¢é‡åºåˆ—ï¼Œå¸Œå°”æ’åºçš„å¹³å‡æ—¶é—´å¤æ‚åº¦å¯ä»¥æœ‰å¾ˆå¤§çš„å˜åŒ–ï¼Œä½†ä¸€èˆ¬è®¤ä¸ºå…¶ä¼˜äºç®€å•çš„æ’å…¥æ’åºï¼Œå¤§çº¦åœ¨$O(n^{1.25})$åˆ°$O(n^{1.6})$ä¹‹é—´ã€‚
- æœ€ä½³æƒ…å†µæ—¶é—´å¤æ‚åº¦ï¼šå¦‚æœæ•°ç»„å·²ç»æ˜¯æœ‰åºçš„ï¼Œæˆ–è€…æ¥è¿‘æœ‰åºï¼Œé‚£ä¹ˆå¸Œå°”æ’åºçš„æ—¶é—´å¤æ‚åº¦å¯ä»¥æ¥è¿‘çº¿æ€§ï¼Œå³$O(n)$ã€‚

å€¼å¾—æ³¨æ„çš„æ˜¯ï¼Œå¯¹äºä¸€äº›ç‰¹å®šçš„å¢é‡åºåˆ—ï¼Œå¸Œå°”æ’åºçš„æ—¶é—´å¤æ‚åº¦å¯ä»¥æ›´æ¥è¿‘äº$O(n log n)$ï¼Œä½†è¿™å¹¶ä¸æ™®éã€‚å› æ­¤ï¼Œå¸Œå°”æ’åºå¯¹äºå°åˆ°ä¸­ç­‰è§„æ¨¡çš„æ•°æ®é›†æ˜¯ä¸€ä¸ªä¸é”™çš„é€‰æ‹©ï¼Œä½†å¯¹äºéå¸¸å¤§çš„æ•°æ®é›†ï¼Œå¯èƒ½ä¸å¦‚å¿«é€Ÿæ’åºæˆ–å½’å¹¶æ’åºç­‰ç®—æ³•é«˜æ•ˆã€‚å¸Œå°”æ’åºçš„ç©ºé—´å¤æ‚åº¦ä¸º$O(1)$ï¼Œå› ä¸ºå®ƒæ˜¯ä¸€ç§åŸåœ°æ’åºç®—æ³•ï¼Œä¸éœ€è¦é¢å¤–çš„å­˜å‚¨ç©ºé—´ã€‚



> https://pythontutor.com å¾ˆå¥½ç”¨ï¼Œé€‚åˆè¿˜ä¸ä¼šç”¨Pycharmè°ƒè¯•å·¥å…·çš„ï¼Œå½“ç„¶åè€…ä¹Ÿå¥½ç”¨ã€‚å¦å¤–å°±æ˜¯printå˜é‡è¾“å‡ºã€‚
>
> ![image-20241021214028913](https://raw.githubusercontent.com/GMyhf/img/main/img/202410212140881.png)



### 3.5 å½’å¹¶æ’åº$$(Merge$$ $$Sort)$$

å½’å¹¶æ’åºé‡‡ç”¨åˆ†æ²»æ³•ï¼Œå°†å¾…æ’åºæ•°ç»„åˆ†æˆè‹¥å¹²ä¸ªå­åºåˆ—ï¼Œåˆ†åˆ«è¿›è¡Œæ’åºï¼Œç„¶åå†åˆå¹¶å·²æ’åºçš„å­åºåˆ—ï¼Œç›´åˆ°æ•´ä¸ªåºåˆ—éƒ½æ’å¥½åºä¸ºæ­¢ã€‚

ä»£ç æ€è·¯ï¼š

1. å°†å¾…æ’åºæ•°ç»„åˆ†æˆå·¦å³ä¸¤ä¸ªå­åºåˆ—ï¼Œé€’å½’åœ°å¯¹å·¦å³å­åºåˆ—è¿›è¡Œå½’å¹¶æ’åºã€‚
2. å°†ä¸¤ä¸ªå·²æ’åºçš„å­åºåˆ—åˆå¹¶æˆä¸€ä¸ªæœ‰åºåºåˆ—ã€‚

```python
def MergeSort(arr):
    if len(arr) <= 1:
        return arr
    mid = len(arr) // 2
    left = MergeSort(arr[:mid])
    right = MergeSort(arr[mid:])
    return merge(left, right)

def merge(left, right):
    result = []
    i = j = 0
    while i < len(left) and j < len(right):
        if left[i] < right[j]:
            result.append(left[i])
            i += 1
        else:
            result.append(right[j])
            j += 1
    result.extend(left[i:])
    result.extend(right[j:])
    return result

if __name__ == "__main__":
    arr_in = [6, 5, 18, 2, 16, 15, 19, 13, 10, 12, 7, 9, 4, 4, 8, 1, 11, 14, 3, 20, 17, 10]
    print(arr_in)
    arr_out = MergeSort(arr_in)
    print(arr_out)
```

æ—¶é—´å¤æ‚åº¦ï¼šO(n log n)
ç©ºé—´å¤æ‚åº¦ï¼šO(n)
ç¨³å®šæ’åº



> é€’å½’ç¨‹åºè¿è¡Œè¿‡ç¨‹ï¼Œä¸å®¹æ˜“ç†è§£ã€‚https://pythontutor.comï¼Œå®Œç¾å±•ç¤º å½’å¹¶æ’åº çš„é€’å½’è¿‡ç¨‹ã€‚
>
> ![image-20241021221131586](https://raw.githubusercontent.com/GMyhf/img/main/img/202410212211019.png)



### 3.6 å¿«é€Ÿæ’åº$$(Quick$$ $$Sort)$$

å¿«é€Ÿæ’åºæ˜¯ä¸€ç§é«˜æ•ˆçš„æ’åºç®—æ³•ï¼Œé‡‡ç”¨åˆ†æ²»æ³•çš„æ€æƒ³ï¼Œé€šè¿‡å°†æ•°ç»„åˆ†å‰²æˆè¾ƒå°çš„å­æ•°ç»„ï¼Œç„¶ååˆ†åˆ«å¯¹å­æ•°ç»„è¿›è¡Œæ’åºï¼Œæœ€ç»ˆå°†æ•°ç»„æ•´åˆæˆæœ‰åºåºåˆ—ã€‚

ä»£ç æ€è·¯ï¼š

1. é€‰æ‹©æ•°ç»„ä¸­çš„ä¸€ä¸ªå…ƒç´ ä½œä¸ºåŸºå‡†ï¼ˆpivotï¼‰ã€‚
2. å°†æ•°ç»„åˆ†å‰²æˆä¸¤ä¸ªå­æ•°ç»„ï¼Œä½¿å¾—å·¦å­æ•°ç»„ä¸­çš„æ‰€æœ‰å…ƒç´ éƒ½å°äºåŸºå‡†ï¼Œå³å­æ•°ç»„ä¸­çš„æ‰€æœ‰å…ƒç´ éƒ½å¤§äºåŸºå‡†ã€‚
3. å¯¹å·¦å³å­æ•°ç»„é€’å½’åœ°è¿›è¡Œå¿«é€Ÿæ’åºã€‚

```python
def QuickSort(arr):
    if len(arr) <= 1:
        return arr
    else:
        pivot = arr[0]  # Choose the first element as the pivot
        left = [x for x in arr[1:] if x < pivot]
        right = [x for x in arr[1:] if x >= pivot]
        return QuickSort(left) + [pivot] + QuickSort(right)

if __name__ == "__main__":
    arr_in = [6, 5, 18, 2, 16, 15, 19, 13, 10, 12, 7, 9, 4, 4, 8, 1, 11, 14, 3, 20, 17, 10]
    print(arr_in)
    arr_out = QuickSort(arr_in)
    print(arr_out)
```

æ—¶é—´å¤æ‚åº¦ï¼šå¹³å‡æƒ…å†µä¸‹ä¸º$O(n log n)$ï¼Œæœ€åæƒ…å†µä¸‹ä¸º$O(n^2)$ï¼ˆå½“æ•°ç»„å·²ç»æœ‰åºæ—¶ï¼‰
ç©ºé—´å¤æ‚åº¦ï¼šå¹³å‡æƒ…å†µä¸‹ä¸º$O(log n)$ï¼Œæœ€åæƒ…å†µä¸‹ä¸º$O(n)$ï¼ˆé€’å½’è°ƒç”¨æ ˆçš„æ·±åº¦ï¼‰
ä¸ç¨³å®šæ’åº



å¦‚æœç”¨åŒæŒ‡é’ˆå®ç°ï¼Œåœ¨partitionå‡½æ•°ä¸­ç”¨ä¸¤ä¸ªæŒ‡é’ˆ `i` å’Œ `j` çš„æ–¹å¼å®ç°ã€‚

```python
def quicksort(arr, left, right):
    if left < right:
        partition_pos = partition(arr, left, right)
        quicksort(arr, left, partition_pos - 1)
        quicksort(arr, partition_pos + 1, right)


def partition(arr, left, right):
    i = left
    j = right - 1
    pivot = arr[right]
    while i <= j:
        while i <= right and arr[i] < pivot:
            i += 1
        while j >= left and arr[j] >= pivot:
            j -= 1
        if i < j:
            arr[i], arr[j] = arr[j], arr[i]
    if arr[i] > pivot:
        arr[i], arr[right] = arr[right], arr[i]
    return i


arr = [22, 11, 88, 66, 55, 77, 33, 44]
quicksort(arr, 0, len(arr) - 1)
print(arr)

# [11, 22, 33, 44, 55, 66, 77, 88]
```





### 3.7 å †æ’åº$$(Heap$$ $$Sort)$$

å †æ’åºåˆ©ç”¨äº†å †è¿™ç§æ•°æ®ç»“æ„çš„ç‰¹æ€§ï¼Œå°†å¾…æ’åºæ•°ç»„æ„å»ºæˆä¸€ä¸ªäºŒå‰å †ï¼Œç„¶åå¯¹å †è¿›è¡Œæ’åºã€‚

ä»£ç æ€è·¯ï¼š

1. æ„å»ºä¸€ä¸ªæœ€å¤§å †ï¼ˆæˆ–æœ€å°å †ï¼‰ï¼Œå°†å¾…æ’åºæ•°ç»„è½¬æ¢æˆå †ã€‚
2. ä»å †é¡¶å¼€å§‹ï¼Œæ¯æ¬¡å°†å †é¡¶å…ƒç´ ä¸å †çš„æœ€åä¸€ä¸ªå…ƒç´ äº¤æ¢ï¼Œç„¶åé‡æ–°è°ƒæ•´å †ã€‚
3. é‡å¤ä¸Šè¿°æ­¥éª¤ï¼Œç›´åˆ°æ•´ä¸ªå †æ’åºå®Œæˆã€‚

```python
def heapify(arr, n, i):
    largest = i
    left = 2 * i + 1
    right = 2 * i + 2

    if left < n and arr[left] > arr[largest]:
        largest = left
    if right < n and arr[right] > arr[largest]:
        largest = right

    if largest != i:
        arr[i], arr[largest] = arr[largest], arr[i]
        heapify(arr, n, largest)

def HeapSort(arr):
    n = len(arr)
    for i in range(n // 2 - 1, -1, -1):
        heapify(arr, n, i)
    for i in range(n - 1, 0, -1):
        arr[i], arr[0] = arr[0], arr[i]
        heapify(arr, i, 0)
    return arr

if __name__ == "__main__":
    arr_in = [6, 5, 18, 2, 16, 15, 19, 13, 10, 12, 7, 9, 4, 4, 8, 1, 11, 14, 3, 20, 17, 10]
    print(arr_in)
    arr_out = HeapSort(arr_in)
    print(arr_out)
```

æ—¶é—´å¤æ‚åº¦ï¼šO(n log n)
ç©ºé—´å¤æ‚åº¦ï¼šO(1)
ä¸ç¨³å®šæ’åº



### 3.8 è®¡æ•°æ’åº$$(Counting$$ $$Sort)$$

è®¡æ•°æ’åºæ˜¯ä¸€ç§éæ¯”è¾ƒæ€§çš„æ’åºç®—æ³•ï¼Œé€‚ç”¨äºå¾…æ’åºæ•°ç»„çš„å–å€¼èŒƒå›´è¾ƒå°ä¸”å·²çŸ¥çš„æƒ…å†µã€‚è¯¥ç®—æ³•é€šè¿‡ç»Ÿè®¡æ¯ä¸ªå…ƒç´ å‡ºç°çš„æ¬¡æ•°ï¼Œç„¶åæ ¹æ®ç»Ÿè®¡ç»“æœé‡æ„æ’åºåçš„æ•°ç»„ã€‚

ä»£ç æ€è·¯ï¼š

1. ç»Ÿè®¡æ•°ç»„ä¸­æ¯ä¸ªå…ƒç´ å‡ºç°çš„æ¬¡æ•°ï¼Œå¹¶å­˜å‚¨åœ¨é¢å¤–çš„è®¡æ•°æ•°ç»„ä¸­ã€‚
2. æ ¹æ®è®¡æ•°æ•°ç»„ä¸­çš„ç»Ÿè®¡ç»“æœï¼Œé‡æ„æ’åºåçš„æ•°ç»„ã€‚

```python
def CountingSort(arr):
    max_value = max(arr)
    count = [0] * (max_value + 1)
    for num in arr:
        count[num] += 1
    sorted_arr = []
    for i in range(max_value + 1):
        sorted_arr.extend([i] * count[i])
    return sorted_arr

if __name__ == "__main__":
    arr_in = [6, 5, 18, 2, 16, 15, 19, 13, 10, 12, 7, 9, 4, 4, 8, 1, 11, 14, 3, 20, 17, 10]
    print(arr_in)
    arr_out = CountingSort(arr_in)
    print(arr_out)
```

æ—¶é—´å¤æ‚åº¦ï¼šO(n + k)ï¼Œå…¶ä¸­næ˜¯æ•°ç»„çš„é•¿åº¦ï¼Œkæ˜¯æ•°ç»„ä¸­çš„æœ€å¤§å€¼ä¸æœ€å°å€¼çš„å·®å€¼
ç©ºé—´å¤æ‚åº¦ï¼šO(n + k)

> ![image-20241021225923484](https://raw.githubusercontent.com/GMyhf/img/main/img/202410212259316.png)



### 3.9 æ¡¶æ’åº$$(Bucket$$ $$Sort)$$

æ¡¶æ’åºæ˜¯ä¸€ç§æ’åºç®—æ³•ï¼Œå®ƒå‡è®¾è¾“å…¥æ˜¯ç”±ä¸€ä¸ªéšæœºè¿‡ç¨‹äº§ç”Ÿçš„ï¼Œè¯¥è¿‡ç¨‹å°†å…ƒç´ å‡åŒ€ã€ç‹¬ç«‹åœ°åˆ†å¸ƒåœ¨[0, 1)åŒºé—´ä¸Šã€‚

ä»£ç æ€è·¯ï¼š

1. åˆ›å»ºä¸€ä¸ªå®šé‡çš„æ¡¶æ•°ç»„ï¼Œå¹¶åˆå§‹åŒ–æ¯ä¸ªæ¡¶ä¸ºç©ºã€‚
2. å°†æ¯ä¸ªå…ƒç´ æ”¾å…¥å¯¹åº”çš„æ¡¶ä¸­ã€‚
3. å¯¹æ¯ä¸ªéç©ºæ¡¶è¿›è¡Œæ’åºã€‚
4. ä»æ¯ä¸ªæ¡¶ä¸­å°†æ’åºåçš„å…ƒç´ ä¾æ¬¡å–å‡ºï¼Œå¾—åˆ°æ’åºç»“æœã€‚

```python
def BucketSort(arr):
    n = len(arr)
    max_val = max(arr)
    min_val = min(arr)
    bucket_size = (max_val - min_val) / n

    buckets = [[] for _ in range(n+1)]

    for num in arr:
        index = int((num - min_val) // bucket_size)
        buckets[index].append(num)

    sorted_arr = []
    for bucket in buckets:
        sorted_arr.extend(sorted(bucket))

    return sorted_arr

if __name__ == "__main__":
    arr_in = [0.897, 0.565, 0.656, 0.1234, 0.665, 0.3434]
    print(arr_in)
    arr_out = BucketSort(arr_in)
    print(arr_out)

#[0.1234, 0.3434, 0.565, 0.656, 0.665, 0.897]
```

æ—¶é—´å¤æ‚åº¦ï¼š$O(n + k)$ï¼Œå…¶ä¸­næ˜¯æ•°ç»„çš„é•¿åº¦ï¼Œkæ˜¯æ¡¶çš„æ•°é‡
ç©ºé—´å¤æ‚åº¦ï¼š$O(n)$



### 3.10 åŸºæ•°æ’åº$$(Radix$$ $$Sort)$$

åŸºæ•°æ’åºæ˜¯ä¸€ç§éæ¯”è¾ƒå‹æ•´æ•°æ’åºç®—æ³•ï¼Œå®ƒé€šè¿‡æŒ‰ä½å¤„ç†æ•°å­—æ¥æ’åºï¼Œé€šå¸¸ç”¨äºå¤„ç†éè´Ÿæ•´æ•°ã€‚

åŸºæ•°æ’åºæ˜¯ä¸€ç§å¤šå…³é”®å­—çš„æ’åºç®—æ³•ï¼Œå®ƒå°†æ•´æ•°æŒ‰ä½æ•°åˆ‡å‰²æˆä¸åŒçš„æ•°å­—ï¼Œç„¶åæŒ‰æ¯ä¸ªä½æ•°åˆ†åˆ«æ¯”è¾ƒã€‚

ä»£ç æ€è·¯ï¼š

1. æ‰¾å‡ºæ•°ç»„ä¸­æœ€å¤§å€¼ï¼Œå¹¶ç¡®å®šæœ€å¤§å€¼çš„ä½æ•°ã€‚
2. ä½¿ç”¨è®¡æ•°æ’åºæˆ–æ¡¶æ’åºï¼Œæ ¹æ®å½“å‰ä½æ•°è¿›è¡Œæ’åºã€‚

```python
def RadixSort(arr):
    max_val = max(arr)
    digit = len(str(max_val))

    for i in range(digit):
        bucket = [[] for _ in range(10)]
        for num in arr:
            bucket[num // (10 ** i) % 10].append(num)
        # for row in bucket:
        #     print(*row)
        arr = [num for sublist in bucket for num in sublist]
        # arr = []
        # for sublist in bucket:
        #     for num in sublist:
        #         arr.append(num)
        #print(arr)

    return arr

if __name__ == "__main__":
    arr_in = [170, 45, 75, 90, 802, 24, 2, 66]
    print(arr_in)
    arr_out = RadixSort(arr_in)
    print(arr_out)
```

æ—¶é—´å¤æ‚åº¦ï¼š$O(nk)$ï¼Œå…¶ä¸­næ˜¯æ•°ç»„çš„é•¿åº¦ï¼Œkæ˜¯æœ€å¤§å€¼çš„ä½æ•°
ç©ºé—´å¤æ‚åº¦ï¼š$O(n + k)$

> **ğŸ§ª å®é™…è¿è¡Œç¤ºä¾‹**
>
> è¾“å…¥ï¼š`[170, 45, 75, 90, 802, 24, 2, 66]`
>
> æˆ‘ä»¬æ¥æ¨¡æ‹Ÿæ¯ä¸€è½®ï¼š
>
> **ç¬¬ 0 è½®ï¼ˆi=0ï¼ŒæŒ‰ä¸ªä½æ’åºï¼‰**
>
> | æ•°å­— | ä¸ªä½ | æ¡¶å· |
> | ---- | ---- | ---- |
> | 170  | 0    | 0    |
> | 45   | 5    | 5    |
> | 75   | 5    | 5    |
> | 90   | 0    | 0    |
> | 802  | 2    | 2    |
> | 24   | 4    | 4    |
> | 2    | 2    | 2    |
> | 66   | 6    | 6    |
>
> â†’ åˆå¹¶åï¼š`[170, 90, 802, 2, 24, 45, 75, 66]`
>
> ---
>
> **ç¬¬ 1 è½®ï¼ˆi=1ï¼ŒæŒ‰åä½æ’åºï¼‰**
>
> | æ•°å­—    | åä½ï¼ˆnum//10 % 10ï¼‰ |
> | ------- | -------------------- |
> | 170 â†’ 7 |                      |
> | 90 â†’ 9  |                      |
> | 802 â†’ 0 |                      |
> | 2 â†’ 0   |                      |
> | 24 â†’ 2  |                      |
> | 45 â†’ 4  |                      |
> | 75 â†’ 7  |                      |
> | 66 â†’ 6  |                      |
>
> â†’ æ¡¶åˆ†å¸ƒï¼š
>
> - bucket[0]: [802, 2]
> - bucket[2]: [24]
> - bucket[4]: [45]
> - bucket[6]: [66]
> - bucket[7]: [170, 75]
> - bucket[9]: [90]
>
> â†’ åˆå¹¶åï¼š`[802, 2, 24, 45, 66, 170, 75, 90]`
>
> ---
>
> **ç¬¬ 2 è½®ï¼ˆi=2ï¼ŒæŒ‰ç™¾ä½æ’åºï¼‰**
>
> | æ•°å­—    | ç™¾ä½ï¼ˆnum//100 % 10ï¼‰ |
> | ------- | --------------------- |
> | 802 â†’ 8 |                       |
> | 2 â†’ 0   |                       |
> | 24 â†’ 0  |                       |
> | 45 â†’ 0  |                       |
> | 66 â†’ 0  |                       |
> | 170 â†’ 1 |                       |
> | 75 â†’ 0  |                       |
> | 90 â†’ 0  |                       |
>
> â†’ æ¡¶åˆ†å¸ƒï¼š
>
> - bucket[0]: [2, 24, 45, 66, 75, 90]
> - bucket[1]: [170]
> - bucket[8]: [802]
>
> â†’ åˆå¹¶åï¼š`[2, 24, 45, 66, 75, 90, 170, 802]`
>
> âœ… **æ’åºå®Œæˆï¼**
>
> ---
>
> âœ… è¾“å‡ºç»“æœ
>
> ```python
> [170, 45, 75, 90, 802, 24, 2, 66]
> [2, 24, 45, 66, 75, 90, 170, 802]
> ```
>
> 



# å››ã€å•è°ƒæ ˆï¼ˆmonotonic stackï¼‰

## 1 Stack in Python

https://www.geeksforgeeks.org/stack-in-python/

<img src="https://raw.githubusercontent.com/GMyhf/img/main/img/image-20231017141624213.png" alt="image-20231017141624213" style="zoom: 50%;" />

## 2 Monotonic Stackï¼ˆå•è°ƒæ ˆï¼‰

å•è°ƒæ ˆæ˜¯ä¸€ç§ç‰¹æ®Šçš„æ ˆç»“æ„ï¼Œå…¶ä¸­çš„å…ƒç´ æŒ‰ç…§æŸç§ç‰¹å®šçš„é¡ºåºï¼ˆå¦‚é€’å¢æˆ–é€’å‡ï¼‰æ’åˆ—ã€‚åœ¨è®¡ç®—æœºç§‘å­¦ä¸­ï¼Œå•è°ƒæ ˆå¸¸ç”¨äºè§£å†³ä¸€ç±»ä¸æ•°ç»„æˆ–åºåˆ—ç›¸å…³çš„ä¼˜åŒ–é—®é¢˜ï¼Œæ¯”å¦‚å¯»æ‰¾ä¸‹ä¸€ä¸ªæ›´å¤§æˆ–æ›´å°çš„å…ƒç´ ç­‰ã€‚

**å•è°ƒæ ˆçš„åº”ç”¨åœºæ™¯**

1. **å¯»æ‰¾ä¸‹ä¸€ä¸ªæ›´å¤§çš„å…ƒç´ **ï¼šç»™å®šä¸€ä¸ªæ•°ç»„ï¼Œå¯¹äºæ¯ä¸ªå…ƒç´ ï¼Œæ‰¾åˆ°å®ƒå³è¾¹ç¬¬ä¸€ä¸ªæ¯”å®ƒå¤§çš„å…ƒç´ çš„ä½ç½®ã€‚è¿™ç±»é—®é¢˜å¯ä»¥ä½¿ç”¨å•è°ƒé€’å‡æ ˆæ¥é«˜æ•ˆè§£å†³ã€‚
2. **å¯»æ‰¾ä¸‹ä¸€ä¸ªæ›´å°çš„å…ƒç´ **ï¼šç±»ä¼¼åœ°ï¼Œå¦‚æœéœ€è¦æ‰¾åˆ°æ¯ä¸ªå…ƒç´ å³è¾¹ç¬¬ä¸€ä¸ªæ¯”å®ƒå°çš„å…ƒç´ çš„ä½ç½®ï¼Œåˆ™å¯ä»¥ä½¿ç”¨å•è°ƒé€’å¢æ ˆã€‚
3. **ç›´æ–¹å›¾ä¸­çš„æœ€å¤§çŸ©å½¢**ï¼šè¿™æ˜¯ä¸€ä¸ªç»å…¸çš„é—®é¢˜ï¼Œæ¶‰åŠåˆ°è®¡ç®—ç›´æ–¹å›¾ä¸­æœ€å¤§çš„çŸ©å½¢é¢ç§¯ï¼Œå¯ä»¥ä½¿ç”¨å•è°ƒæ ˆæ¥æœ‰æ•ˆæ±‚è§£ã€‚
4. **æ»‘åŠ¨çª—å£çš„æœ€å¤§å€¼**ï¼šè™½ç„¶è¿™ä¸ªé—®é¢˜é€šå¸¸ä½¿ç”¨åŒç«¯é˜Ÿåˆ—æ¥è§£å†³ï¼Œä½†ä¹Ÿå¯ä»¥é€šè¿‡å•è°ƒæ ˆçš„å˜å½¢æ¥å¤„ç†ã€‚

**å•è°ƒæ ˆçš„å·¥ä½œåŸç†**

- **å…¥æ ˆæ“ä½œ**ï¼šå½“ä¸€ä¸ªæ–°çš„å…ƒç´ éœ€è¦åŠ å…¥åˆ°æ ˆä¸­æ—¶ï¼Œæ ¹æ®æ ˆçš„æ€§è´¨ï¼ˆé€’å¢æˆ–é€’å‡ï¼‰ï¼Œå°†æ‰€æœ‰ä¸ç¬¦åˆæ¡ä»¶çš„æ ˆé¡¶å…ƒç´ å¼¹å‡ºï¼Œç„¶åå†å°†æ–°å…ƒç´ å‹å…¥æ ˆä¸­ã€‚
- **å‡ºæ ˆæ“ä½œ**ï¼šé€šå¸¸æƒ…å†µä¸‹ï¼Œå‡ºæ ˆæ“ä½œæ˜¯è‡ªåŠ¨å‘ç”Ÿçš„ï¼Œå³åœ¨æ‰§è¡Œå…¥æ ˆæ“ä½œæ—¶ï¼Œä¸ºäº†ä¿æŒæ ˆçš„å•è°ƒæ€§ï¼Œä¼šè‡ªåŠ¨ç§»é™¤ä¸æ»¡è¶³æ¡ä»¶çš„æ ˆé¡¶å…ƒç´ ã€‚

**å®ç°ç¤ºä¾‹**

è¿™é‡Œä»¥ä¸€ä¸ªç®€å•çš„ä¾‹å­è¯´æ˜å¦‚ä½•ä½¿ç”¨å•è°ƒæ ˆæ¥è§£å†³é—®é¢˜ã€‚å‡è®¾æˆ‘ä»¬éœ€è¦æ‰¾åˆ°æ•°ç»„ `[4, 5, 2, 25]` ä¸­æ¯ä¸ªå…ƒç´ å³è¾¹ç¬¬ä¸€ä¸ªæ›´å¤§çš„æ•°ã€‚

```python
def next_greater_element(nums):
    stack = []
    result = [0] * len(nums)
    
    for i in range(len(nums)):
        # å½“æ ˆä¸ä¸ºç©ºä¸”å½“å‰è€ƒå¯Ÿçš„å…ƒç´ å¤§äºæ ˆé¡¶å…ƒç´ æ—¶
        while stack and nums[i] > nums[stack[-1]]:
            index = stack.pop()
            result[index] = nums[i]
        # å°†å½“å‰å…ƒç´ çš„ç´¢å¼•å‹å…¥æ ˆä¸­
        stack.append(i)
    
    # å¯¹äºæ ˆä¸­å‰©ä½™çš„å…ƒç´ ï¼Œå®ƒä»¬æ²¡æœ‰æ›´å¤§çš„å…ƒç´ 
    while stack:
        index = stack.pop()
        result[index] = -1
    
    return result

nums = [4, 5, 2, 25]
print(next_greater_element(nums))  # è¾“å‡º: [5, 25, 25, -1]
```

åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œæˆ‘ä»¬ç»´æŠ¤äº†ä¸€ä¸ªå•è°ƒé€’å‡çš„æ ˆï¼Œå½“é‡åˆ°æ¯”æ ˆé¡¶å…ƒç´ å¤§çš„æ•°æ—¶ï¼Œå°±æ‰¾åˆ°äº†æ ˆé¡¶å…ƒç´ çš„â€œä¸‹ä¸€ä¸ªæ›´å¤§çš„æ•°â€ï¼Œç„¶åå°†å…¶ä»æ ˆä¸­å¼¹å‡ºï¼Œå¹¶è®°å½•ç»“æœã€‚æœ€åï¼Œå¯¹äºé‚£äº›åœ¨æ ˆä¸­æ²¡æœ‰åŒ¹é…åˆ°æ›´å¤§æ•°çš„å…ƒç´ ï¼Œå®ƒä»¬çš„ç»“æœè®¾ç½®ä¸º `-1`ï¼Œè¡¨ç¤ºæ²¡æœ‰æ›´å¤§çš„æ•°ã€‚



## 3 ç¼–ç¨‹é¢˜ç›®

### ç»ƒä¹ 04137: æœ€å°æ–°æ•´æ•°

stack, greedy, http://cs101.openjudge.cn/practice/04137/

ç»™å®šä¸€ä¸ªåè¿›åˆ¶æ­£æ•´æ•°n(0 < n < 1000000000)ï¼Œæ¯ä¸ªæ•°ä½ä¸Šæ•°å­—å‡ä¸ä¸º0ã€‚nçš„ä½æ•°ä¸ºmã€‚
ç°åœ¨ä»mä½ä¸­åˆ é™¤kä½(0<k < m)ï¼Œæ±‚ç”Ÿæˆçš„æ–°æ•´æ•°æœ€å°ä¸ºå¤šå°‘ï¼Ÿ
ä¾‹å¦‚: n = 9128456, k = 2, åˆ™ç”Ÿæˆçš„æ–°æ•´æ•°æœ€å°ä¸º12456

**è¾“å…¥**

ç¬¬ä¸€è¡Œt, è¡¨ç¤ºæœ‰tç»„æ•°æ®ï¼›
æ¥ä¸‹æ¥tè¡Œï¼Œæ¯ä¸€è¡Œè¡¨ç¤ºä¸€ç»„æµ‹è¯•æ•°æ®ï¼Œæ¯ç»„æµ‹è¯•æ•°æ®åŒ…å«ä¸¤ä¸ªæ•°å­—n, kã€‚

**è¾“å‡º**

tè¡Œï¼Œæ¯è¡Œä¸€ä¸ªæ•°å­—ï¼Œè¡¨ç¤ºä»nä¸­åˆ é™¤kä½åå¾—åˆ°çš„æœ€å°æ•´æ•°ã€‚

æ ·ä¾‹è¾“å…¥

```
2
9128456 2
1444 3
```

æ ·ä¾‹è¾“å‡º

```
12456
1
```



```python
# è’‹å­è½©23å·¥å­¦é™¢
def removeKDigits(num, k):
    stack = []
    for digit in num:
        while k and stack and stack[-1] > digit:
            stack.pop()
            k -= 1
        stack.append(digit)
    # å¦‚æœè¿˜æœªåˆ é™¤kä½ï¼Œä»å°¾éƒ¨ç»§ç»­åˆ é™¤
    while k:
        stack.pop()
        k -= 1
    return int(''.join(stack))
t = int(input())
results = []
for _ in range(t):
    n, k = input().split()
    results.append(removeKDigits(n, int(k)))
for result in results:
    print(result)
```



### ç»ƒä¹ 21577: æŠ¤æ—å‘˜ç›–æˆ¿å­ åŠ å¼ºç‰ˆ

matrix/implementation, http://cs101.openjudge.cn/practice/21577

åœ¨ä¸€ç‰‡ä¿æŠ¤æ—ä¸­ï¼ŒæŠ¤æ—å‘˜æƒ³è¦ç›–ä¸€åº§æˆ¿å­æ¥å±…ä½ï¼Œä½†ä»–ä¸èƒ½ç ä¼ä»»ä½•æ ‘æœ¨ã€‚
ç°åœ¨è¯·ä½ å¸®ä»–è®¡ç®—ï¼šä¿æŠ¤æ—ä¸­æ‰€èƒ½ç”¨æ¥ç›–æˆ¿å­çš„çŸ©å½¢ç©ºåœ°çš„æœ€å¤§é¢ç§¯ã€‚

**è¾“å…¥**
ä¿æŠ¤æ—ç”¨ä¸€ä¸ªäºŒç»´çŸ©é˜µæ¥è¡¨ç¤ºï¼Œé•¿å®½éƒ½ä¸è¶…è¿‡1000ï¼ˆå³<=1000ï¼‰ã€‚
ç¬¬ä¸€è¡Œæ˜¯ä¸¤ä¸ªæ­£æ•´æ•°m,nï¼Œè¡¨ç¤ºçŸ©é˜µæœ‰mè¡Œnåˆ—ã€‚
ç„¶åæ˜¯mè¡Œï¼Œæ¯è¡Œnä¸ªæ•´æ•°ï¼Œç”¨1ä»£è¡¨æ ‘æœ¨ï¼Œç”¨0è¡¨ç¤ºç©ºåœ°ã€‚

**è¾“å‡º**
ä¸€ä¸ªæ­£æ•´æ•°ï¼Œè¡¨ç¤ºä¿æŠ¤æ—ä¸­èƒ½ç”¨æ¥ç›–æˆ¿å­çš„æœ€å¤§çŸ©å½¢ç©ºåœ°é¢ç§¯ã€‚



### ç»ƒä¹ T26977: æ¥é›¨æ°´

stack, dp, math, http://cs101.openjudge.cn/practice/26977/

ç»™å®š n ä¸ªéè´Ÿæ•´æ•°è¡¨ç¤ºæ¯ä¸ªå®½åº¦ä¸º 1 çš„æŸ±å­çš„é«˜åº¦å›¾ï¼Œè®¡ç®—æŒ‰æ­¤æ’åˆ—çš„æŸ±å­ï¼Œä¸‹é›¨ä¹‹åèƒ½æ¥å¤šå°‘é›¨æ°´ã€‚

ç¤ºä¾‹ï¼š

![img](https://raw.githubusercontent.com/GMyhf/img/main/img/1697427386.png)

height = [0,1,0,2,1,0,1,3,2,1,2,1]

ç”±æ•°ç»„è¡¨ç¤ºçš„é«˜åº¦å›¾ï¼Œåœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œå¯ä»¥æ¥ 6 ä¸ªå•ä½çš„é›¨æ°´ï¼ˆè“è‰²éƒ¨åˆ†è¡¨ç¤ºé›¨æ°´ï¼‰ã€‚

**è¾“å…¥**

ç¬¬ä¸€è¡ŒåŒ…å«ä¸€ä¸ªæ•´æ•°nã€‚1 <= n <= 2 * 10^4
ç¬¬äºŒè¡ŒåŒ…å«nä¸ªæ•´æ•°ï¼Œç›¸é‚»æ•´æ•°é—´ä»¥ç©ºæ ¼éš”å¼€ã€‚0 <= ratings[i] <= 2 * 10^5

**è¾“å‡º**

ä¸€ä¸ªæ•´æ•°



# äº”ã€ã€Œæ»‘åŠ¨çª—å£æœ€å¤§å€¼ã€ä¸‰è€…åˆä¸€


**ã€Œæ»‘åŠ¨çª—å£æœ€å¤§å€¼ã€é—®é¢˜** â€”â€”è¿™æ˜¯ä¸‰è€…ï¼ˆåŒæŒ‡é’ˆ + æ»‘åŠ¨çª—å£ + dequeï¼‰å®Œç¾ç»“åˆçš„ä»£è¡¨ã€‚

------

## 1 é—®é¢˜æè¿°

ç»™ä½ ä¸€ä¸ªæ•°ç»„ `nums` å’Œä¸€ä¸ªæ•´æ•° `k`ï¼Œè¯·è¾“å‡ºæ¯ä¸ªé•¿åº¦ä¸º `k` çš„å­æ•°ç»„çš„æœ€å¤§å€¼ã€‚

ä¾‹å¦‚ï¼š

```python
nums = [1,3,-1,-3,5,3,6,7]
k = 3
è¾“å‡º: [3,3,5,5,6,7]
```

------

## 2 è§£æ³•åˆ†å±‚è®²è§£

**ç¬¬ä¸€å±‚ï¼šåŒæŒ‡é’ˆæ€è·¯**

å¸Œæœ›ç”¨ä¸¤ä¸ªæŒ‡é’ˆç»´æŠ¤ä¸€ä¸ªåŒºé—´ `[left, right)`ï¼š

- `right` å‘å³æ‰©å±•çª—å£ï¼›
- `left` æ ¹æ®éœ€è¦å³ç§»ç¼©å°çª—å£ï¼›
- æ¯æ¬¡çª—å£å¤§å°ä¸º `k` æ—¶ï¼Œè¾“å‡ºæœ€å¤§å€¼ã€‚

ä½†**æš´åŠ›æ±‚æœ€å¤§å€¼ä¼š O(k)**ï¼Œæ‰€ä»¥æˆ‘ä»¬è¦æƒ³åŠæ³•ä¼˜åŒ–æœ€å¤§å€¼ç»´æŠ¤ã€‚

------

**ç¬¬äºŒå±‚ï¼šæ»‘åŠ¨çª—å£ç»“æ„**

çª—å£çš„å®šä¹‰ï¼š
åœ¨ä»»æ„æ—¶åˆ»ï¼Œ`nums[left:right]` å°±æ˜¯å½“å‰çª—å£ã€‚

ç›®æ ‡ï¼š
åœ¨æ¯æ¬¡çª—å£æ»‘åŠ¨ä¸€æ­¥æ—¶ï¼Œ**é«˜æ•ˆåœ°** å¾—åˆ°æœ€å¤§å€¼ã€‚
äºæ˜¯å¼•å…¥ä¸€ä¸ªè¾…åŠ©ç»“æ„æ¥ç»´æŠ¤çª—å£å†…çš„æœ€å¤§å€¼â€”â€”è¿™æ—¶ **`deque` æ´¾ä¸Šç”¨åœº**ã€‚

------

**ç¬¬ä¸‰å±‚ï¼š`deque` ç»´æŠ¤å•è°ƒæ€§**

ç”¨ä¸€ä¸ª **å•è°ƒé€’å‡é˜Ÿåˆ—**ï¼ˆé‡Œé¢æ”¾çš„æ˜¯ä¸‹æ ‡ï¼Œä¸æ˜¯å€¼ï¼‰ï¼š

- å½“å³ç«¯åŠ å…¥æ–°å…ƒç´ æ—¶ï¼Œ**æŠŠæ‰€æœ‰æ¯”å®ƒå°çš„å…ƒç´ éƒ½å¼¹å‡º**ï¼ˆå› ä¸ºå®ƒä»¬æ°¸è¿œä¸ä¼šå†æˆä¸ºæœ€å¤§å€¼ï¼‰ï¼›
- å½“å·¦ç«¯å…ƒç´ æ»‘å‡ºçª—å£æ—¶ï¼Œå¦‚æœå®ƒæ­£å¥½æ˜¯é˜Ÿé¦–ï¼Œå°±æŠŠå®ƒå¼¹å‡ºã€‚

è¿™æ ·ï¼Œé˜Ÿé¦–å…ƒç´ å§‹ç»ˆæ˜¯å½“å‰çª—å£çš„æœ€å¤§å€¼ã€‚

------

## 3 æœ€ç»ˆä»£ç ç¤ºä¾‹

```python
from collections import deque

def maxSlidingWindow(nums, k):
    dq = deque()  # å­˜ä¸‹æ ‡ï¼Œä¿è¯å¯¹åº”å€¼é€’å‡
    res = []
    for right, x in enumerate(nums):
        # step 1: çª—å£å³æ‰©ï¼Œä¿æŒå•è°ƒé€’å‡
        while dq and nums[dq[-1]] <= x:
            dq.pop()
        dq.append(right)

        # step 2: ç§»é™¤æ»‘å‡ºçª—å£çš„å·¦ç«¯å…ƒç´ 
        if dq[0] <= right - k:
            dq.popleft()

        # step 3: å½“çª—å£å½¢æˆï¼ˆé•¿åº¦ >= kï¼‰æ—¶ï¼Œè®°å½•æœ€å¤§å€¼
        if right >= k - 1:
            res.append(nums[dq[0]])
    return res

# âœ… æµ‹è¯•
print(maxSlidingWindow([1,3,-1,-3,5,3,6,7], 3))
# è¾“å‡º: [3, 3, 5, 5, 6, 7]
```

------

## 4 ä¸‰è€…å…³ç³»å›¾

```
          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
          â”‚ åŒæŒ‡é’ˆæ€æƒ³   â”‚ â†â€”â€”â€” ä¸¤ç«¯éå†ã€å®šä½åŒºé—´
          â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
                 â”‚
                 â–¼
          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
          â”‚ æ»‘åŠ¨çª—å£æ¡†æ¶ â”‚ â†â€”â€”â€” ç»´æŠ¤[left, right)
          â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
                 â”‚
                 â–¼
          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
          â”‚ dequeç»“æ„è¾…åŠ© â”‚ â†â€”â€”â€” é«˜æ•ˆç»´æŠ¤çª—å£æœ€å€¼
          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

------



âœ… **ä¸€å¥è¯æ€»ç»“ï¼š**

> åœ¨ã€Œæ»‘åŠ¨çª—å£æœ€å¤§å€¼ã€ä¸­ï¼Œ
> **åŒæŒ‡é’ˆ**å®šä¹‰çª—å£è¾¹ç•Œï¼Œ
> **æ»‘åŠ¨çª—å£**æè¿°çª—å£åŠ¨æ€ï¼Œ
> **deque**ç»´æŠ¤çª—å£å†…éƒ¨çš„æœ€ä¼˜çŠ¶æ€ã€‚



# å…­ã€å‰ç¼€å’Œä¼˜åŒ–åŒºåŸŸç»Ÿè®¡

**å‰ç¼€å’Œ**ï¼ˆPrefix Sumï¼‰æ˜¯ä¸€ç§ç”¨äºé«˜æ•ˆè®¡ç®—æ•°ç»„åŒºé—´å’Œçš„é¢„å¤„ç†æŠ€æœ¯ã€‚

## 1 ä¸€ç»´å‰ç¼€å’Œ

ç»™å®šæ•°ç»„ `A[0..n-1]`ï¼Œå…¶å‰ç¼€å’Œæ•°ç»„ `P` å®šä¹‰ä¸ºï¼š

- `P[0] = 0`
- `P[i] = A[0] + A[1] + ... + A[i-1]`

è¿™æ ·ï¼ŒåŒºé—´ `[l, r]` çš„å’Œå¯ä»¥å¿«é€Ÿè®¡ç®—ä¸ºï¼š`P[r+1] - P[l]`

## 2 äºŒç»´å‰ç¼€å’Œ

å¯¹äºäºŒç»´æ•°ç»„ï¼Œå‰ç¼€å’Œæ‰©å±•ä¸º**äºŒç»´å‰ç¼€å’Œ**ã€‚`prefix[i][j]` è¡¨ç¤ºä» `(0,0)` åˆ° `(i-1,j-1)` çŸ©å½¢åŒºåŸŸçš„å…ƒç´ å’Œã€‚

æ ¸å¿ƒå…¬å¼ï¼š

```
prefix[i][j] = matrix[i-1][j-1] + prefix[i-1][j] + prefix[i][j-1] - prefix[i-1][j-1]
```

æŸ¥è¯¢çŸ©å½¢åŒºåŸŸ `(x1,y1)` åˆ° `(x2,y2)` çš„å’Œï¼š

```
sum = prefix[x2+1][y2+1] - prefix[x1][y2+1] - prefix[x2+1][y1] + prefix[x1][y1]
```



## 3 ç¼–ç¨‹é¢˜ç›®

### ç»ƒä¹ M04133: åƒåœ¾ç‚¸å¼¹

matrices, http://cs101.openjudge.cn/pctbook/M04133/

2018å¹´ä¿„ç½—æ–¯ä¸–ç•Œæ¯ï¼ˆ2018 FIFA World Cupï¼‰å¼€è¸¢å•¦ï¼ä¸ºäº†æ–¹ä¾¿çƒè¿·è§‚çœ‹æ¯”èµ›ï¼Œè«æ–¯ç§‘è¡—é“ä¸Šå¾ˆå¤šè·¯å£éƒ½æ”¾ç½®äº†çš„ç›´æ’­å¤§å±å¹•ï¼Œä½†æ˜¯äººç¾¤æ•£å»åæ€»ä¼šåœ¨è¿™äº›è·¯å£ç•™ä¸‹ä¸€å †åƒåœ¾ã€‚ä¸ºæ­¤ä¿„ç½—æ–¯æ”¿åºœå†³å®šåŠ¨ç”¨ä¸€ç§æœ€æ–°å‘æ˜â€”â€”â€œåƒåœ¾ç‚¸å¼¹â€ã€‚è¿™ç§â€œç‚¸å¼¹â€åˆ©ç”¨æœ€å…ˆè¿›çš„é‡å­ç‰©ç†æŠ€æœ¯ï¼Œçˆ†ç‚¸åäº§ç”Ÿçš„å†²å‡»æ³¢å¯ä»¥å®Œå…¨æ¸…é™¤æ³¢åŠèŒƒå›´å†…çš„æ‰€æœ‰åƒåœ¾ï¼Œå¹¶ä¸”ä¸ä¼šäº§ç”Ÿä»»ä½•å…¶ä»–ä¸è‰¯å½±å“ã€‚ç‚¸å¼¹çˆ†ç‚¸åå†²å‡»æ³¢æ˜¯ä»¥æ­£æ–¹å½¢æ–¹å¼æ‰©æ•£çš„ï¼Œç‚¸å¼¹å¨åŠ›ï¼ˆæ‰©æ•£è·ç¦»ï¼‰ä»¥dç»™å‡ºï¼Œè¡¨ç¤ºå¯ä»¥ä¼ æ’­dæ¡è¡—é“ã€‚

ä¾‹å¦‚ä¸‹å›¾æ˜¯ä¸€ä¸ªd=1çš„â€œåƒåœ¾ç‚¸å¼¹â€çˆ†ç‚¸åçš„æ³¢åŠèŒƒå›´ã€‚

![img](https://raw.githubusercontent.com/GMyhf/img/main/img/1403230629.jpg)

å‡è®¾è«æ–¯ç§‘çš„å¸ƒå±€ä¸ºä¸¥æ ¼çš„1025*1025çš„ç½‘æ ¼çŠ¶ï¼Œç”±äºè´¢æ”¿é—®é¢˜å¸‚æ”¿åºœåªä¹°å¾—èµ·ä¸€æšâ€œåƒåœ¾ç‚¸å¼¹â€ï¼Œå¸Œæœ›ä½ å¸®ä»–ä»¬æ‰¾åˆ°åˆé€‚çš„æŠ•æ”¾åœ°ç‚¹ï¼Œä½¿å¾—ä¸€æ¬¡æ¸…é™¤çš„åƒåœ¾æ€»é‡æœ€å¤šï¼ˆå‡è®¾åƒåœ¾æ•°é‡å¯ä»¥ç”¨ä¸€ä¸ªéè´Ÿæ•´æ•°è¡¨ç¤ºï¼Œå¹¶ä¸”é™¤è®¾ç½®å¤§å±å¹•çš„è·¯å£ä»¥å¤–çš„åœ°ç‚¹æ²¡æœ‰åƒåœ¾ï¼‰ã€‚

**è¾“å…¥**

ç¬¬ä¸€è¡Œç»™å‡ºâ€œç‚¸å¼¹â€å¨åŠ›d(1 <= d <= 50)ã€‚ç¬¬äºŒè¡Œç»™å‡ºä¸€ä¸ªæ•°ç»„n(1 <= n <= 20)è¡¨ç¤ºè®¾ç½®äº†å¤§å±å¹•(æœ‰åƒåœ¾)çš„è·¯å£æ•°ç›®ã€‚æ¥ä¸‹æ¥nè¡Œæ¯è¡Œç»™å‡ºä¸‰ä¸ªæ•°å­—x, y, i, åˆ†åˆ«ä»£è¡¨è·¯å£çš„åæ ‡(x, y)ä»¥åŠåƒåœ¾æ•°é‡i. ç‚¹åæ ‡(x, y)ä¿è¯æ˜¯æœ‰æ•ˆçš„ï¼ˆåŒºé—´åœ¨0åˆ°1024ä¹‹é—´ï¼‰ï¼ŒåŒä¸€åæ ‡åªä¼šç»™å‡ºä¸€æ¬¡ã€‚

**è¾“å‡º**

è¾“å‡ºèƒ½æ¸…ç†åƒåœ¾æœ€å¤šçš„æŠ•æ”¾ç‚¹æ•°ç›®ï¼Œä»¥åŠèƒ½å¤Ÿæ¸…é™¤çš„åƒåœ¾æ€»é‡ã€‚

æ ·ä¾‹è¾“å…¥

```
1
2
4 4 10
6 6 20
```

æ ·ä¾‹è¾“å‡º

```
1 30
```





ã€å¤å­æ¶µ å…ƒåŸ¹å­¦é™¢ã€‘æ€è·¯ï¼šç”¨äºŒç»´å‰ç¼€å’Œæ•°ç»„é¿å…å¤šæ¬¡æš´åŠ›å¾ªç¯

> è¿™æ˜¯ä¸€ä¸ªå…¸å‹çš„â€œç”¨å‰ç¼€å’Œä¼˜åŒ–åŒºåŸŸç»Ÿè®¡â€é—®é¢˜ï¼Œé€‚åˆç»ƒä¹ äºŒç»´å‰ç¼€å’Œçš„åº”ç”¨ã€‚

```python
def main():
    d = int(input().strip())
    n = int(input().strip())

    # ä½¿ç”¨å­—å…¸å­˜å‚¨åƒåœ¾ç‚¹ï¼ŒèŠ‚çœç©ºé—´ï¼ˆç¨€ç–æ•°æ®æ—¶ç‰¹åˆ«æœ‰æ•ˆï¼‰
    moskow = {}
    max_coord = 1024
    min_coord = 0

    for _ in range(n):
        x, y, weight = map(int, input().strip().split())
        if (x, y) not in moskow:
            moskow[(x, y)] = 0
        moskow[(x, y)] += weight

    # æ„å»ºäºŒç»´å‰ç¼€å’Œæ•°ç»„ï¼ˆåªæ„å»º [0..1024] èŒƒå›´ï¼‰
    size = max_coord + 1
    prefix = [[0] * (size + 1) for _ in range(size + 1)]  # prefix[0..1024+1][0..1024+1]

    for i in range(1, size + 1):
        for j in range(1, size + 1):
            # æ³¨æ„ï¼šprefix[i][j] å¯¹åº”åæ ‡ (i-1, j-1)
            val = moskow.get((i - 1, j - 1), 0)
            prefix[i][j] = val + prefix[i - 1][j] + prefix[i][j - 1] - prefix[i - 1][j - 1]

    max_total = 0
    count = 0

    # éå†æ‰€æœ‰å¯èƒ½çš„çˆ†ç‚¸ä¸­å¿ƒ (i, j)ï¼ŒèŒƒå›´ [0, 1024]
    for i in range(min_coord, max_coord + 1):
        for j in range(min_coord, max_coord + 1):
            # è®¡ç®—çˆ†ç‚¸å½±å“åŒºåŸŸ [x1, x2] Ã— [y1, y2]
            x1 = max(min_coord, i - d)
            y1 = max(min_coord, j - d)
            x2 = min(max_coord, i + d)
            y2 = min(max_coord, j + d)

            # æŸ¥è¯¢å‰ç¼€å’Œï¼šæ³¨æ„ prefix æ˜¯ 1-indexed
            total = prefix[x2 + 1][y2 + 1] \
                    - prefix[x1][y2 + 1] \
                    - prefix[x2 + 1][y1] \
                    + prefix[x1][y1]

            if total > max_total:
                max_total = total
                count = 1
            elif total == max_total:
                count += 1

    print(count, max_total)


if __name__ == '__main__':
    main()
```



# ä¸ƒã€Kadaneç®—æ³•

## 1 ç†è§£ Kadane ç®—æ³•ï¼ˆä¸€ç»´æœ€å¤§å­æ•°ç»„å’Œï¼‰

Kadane ç®—æ³•ç”¨äºè§£å†³â€œ**æœ€å¤§å­æ•°ç»„å’Œ**â€é—®é¢˜ï¼Œå³åœ¨ä¸€ä¸ªæ•´æ•°æ•°ç»„ä¸­æ‰¾åˆ°è¿ç»­å­æ•°ç»„çš„æœ€å¤§å’Œã€‚

**ç®—æ³•æ€æƒ³ï¼š**

- `curr_max`ï¼šä»¥å½“å‰å…ƒç´ ç»“å°¾çš„æœ€å¤§è¿ç»­å’Œ
- `total_max`ï¼šå…¨å±€æœ€å¤§å’Œ

Python å®ç°ï¼š

```python
def kadane(arr):
    curr_max = total_max = arr[0]
    for x in arr[1:]:
        curr_max = max(x, curr_max + x)  # è¦ä¹ˆé‡æ–°å¼€å§‹ï¼Œè¦ä¹ˆæ¥ä¸Šå‰é¢
        total_max = max(total_max, curr_max)
    return total_max
```

âœ… ä¾‹å­ï¼š`[-2, 1, -3, 4, -1, 2, 1, -5, 4]` â†’ æœ€å¤§å­æ•°ç»„ `[4,-1,2,1]`ï¼Œå’Œä¸º `6`

------

## 2 æ‰©å±•åˆ°äºŒç»´ â€”â€” æœ€å¤§å­çŸ©é˜µ

å°† Kadane ç®—æ³•çš„æ€æƒ³æ‰©å±•åˆ°äºŒç»´ï¼š

**æ€»ä½“ç­–ç•¥ï¼š**

1. æšä¸¾æ‰€æœ‰å¯èƒ½çš„**ä¸Šè¾¹ç•Œ `top`**
2. å¯¹æ¯ä¸ª `top`ï¼Œæšä¸¾æ‰€æœ‰ `bottom >= top`
3. å¯¹æ¯ä¸€å¯¹ `(top, bottom)`ï¼Œè®¡ç®—ä»ç¬¬ `top` è¡Œåˆ°ç¬¬ `bottom` è¡Œçš„**æ¯åˆ—çš„ç´¯åŠ å’Œ**ï¼Œå½¢æˆä¸€ä¸ªä¸€ç»´æ•°ç»„ `col_sum`
4. åœ¨ `col_sum` ä¸Šè¿è¡Œ Kadane ç®—æ³•ï¼Œå¾—åˆ°å½“å‰ä¸Šä¸‹è¾¹ç•Œä¸‹çš„æœ€å¤§å­çŸ©é˜µå’Œ
5. æ›´æ–°å…¨å±€æœ€å¤§å€¼

ğŸ“Š **ä¸¾ä¾‹è¯´æ˜**

åŸçŸ©é˜µï¼š

```
0 -2 -7  0
9  2 -6  2   â† top=1
-4 1 -4  1
-1 8  0 -2   â† bottom=3
```

å›ºå®š `top=1`, `bottom=3`ï¼Œè®¡ç®—æ¯åˆ—çš„å’Œï¼š

- ç¬¬0åˆ—ï¼š9 + (-4) + (-1) = 4
- ç¬¬1åˆ—ï¼š2 + 1 + 8 = 11
- ç¬¬2åˆ—ï¼š-6 + (-4) + 0 = -10
- ç¬¬3åˆ—ï¼š2 + 1 + (-2) = 1

å¾—åˆ°ä¸€ç»´æ•°ç»„ï¼š`[4, 11, -10, 1]`

è¿è¡Œ Kadaneï¼š

- æœ€å¤§å­æ•°ç»„ï¼š`[4, 11]` æˆ– `[11]` â†’ å’Œä¸º `15`

âœ… æ­£å¥½å¯¹åº”æ ·ä¾‹ç­”æ¡ˆï¼



## 3 ç¼–ç¨‹é¢˜ç›®

### ç»ƒä¹ M02766: æœ€å¤§å­çŸ©é˜µ

matrices, kadane, http://cs101.openjudge.cn/pctbook/M02766/

å·²çŸ¥çŸ©é˜µçš„å¤§å°å®šä¹‰ä¸ºçŸ©é˜µä¸­æ‰€æœ‰å…ƒç´ çš„å’Œã€‚ç»™å®šä¸€ä¸ªçŸ©é˜µï¼Œä½ çš„ä»»åŠ¡æ˜¯æ‰¾åˆ°æœ€å¤§çš„éç©º(å¤§å°è‡³å°‘æ˜¯1 * 1)å­çŸ©é˜µã€‚

æ¯”å¦‚ï¼Œå¦‚ä¸‹4 * 4çš„çŸ©é˜µ

0 -2 -7 0
9 2 -6 2
-4 1 -4 1
-1 8 0 -2

çš„æœ€å¤§å­çŸ©é˜µæ˜¯

9 2
-4 1
-1 8

è¿™ä¸ªå­çŸ©é˜µçš„å¤§å°æ˜¯15ã€‚

**è¾“å…¥**

è¾“å…¥æ˜¯ä¸€ä¸ªN * Nçš„çŸ©é˜µã€‚è¾“å…¥çš„ç¬¬ä¸€è¡Œç»™å‡ºN (0 < N <= 100)ã€‚å†åé¢çš„è‹¥å¹²è¡Œä¸­ï¼Œä¾æ¬¡ï¼ˆé¦–å…ˆä»å·¦åˆ°å³ç»™å‡ºç¬¬ä¸€è¡Œçš„Nä¸ªæ•´æ•°ï¼Œå†ä»å·¦åˆ°å³ç»™å‡ºç¬¬äºŒè¡Œçš„Nä¸ªæ•´æ•°â€¦â€¦ï¼‰ç»™å‡ºçŸ©é˜µä¸­çš„N2ä¸ªæ•´æ•°ï¼Œæ•´æ•°ä¹‹é—´ç”±ç©ºç™½å­—ç¬¦åˆ†éš”ï¼ˆç©ºæ ¼æˆ–è€…ç©ºè¡Œï¼‰ã€‚å·²çŸ¥çŸ©é˜µä¸­æ•´æ•°çš„èŒƒå›´éƒ½åœ¨[-127, 127]ã€‚

**è¾“å‡º**

è¾“å‡ºæœ€å¤§å­çŸ©é˜µçš„å¤§å°ã€‚

æ ·ä¾‹è¾“å…¥

```
4
0 -2 -7 0 9 2 -6 2
-4 1 -4  1 -1

8  0 -2
```

æ ·ä¾‹è¾“å‡º

```
15
```

æ¥æºï¼šç¿»è¯‘è‡ª Greater New York 2001 çš„è¯•é¢˜





```python
def kadane(s):
    curr_max = total_max = s[0]
    for x in s[1:]:
        curr_max = max(x, curr_max + x)
        total_max = max(total_max, curr_max)
    return total_max

def max_sum_matrix(mat):
    max_sum = -float('inf')
    row, col = len(mat), len(mat[0])
    for top in range(row):
        col_sum = [0] * col
        for bottom in range(top, row):
            for c in range(col):
                col_sum[c] += mat[bottom][c]
            max_sum = max(max_sum, kadane(col_sum))
    return max_sum

n = int(input())
nums = []
while len(nums) < n**2:
    nums.extend(input().split())
mat = [list(map(int, nums[i*n:(i+1)*n])) for i in range(n)]
print(max_sum_matrix(mat))
```

> ä¸€ã€ç®—æ³•åŸç†
>
> äºŒç»´æœ€å¤§å­çŸ©é˜µé—®é¢˜ï¼Œå¯ä»¥é€šè¿‡ã€Œè¡Œå‹ç¼© + ä¸€ç»´ Kadaneã€è§£å†³ã€‚
>
> #### æ€æƒ³ï¼š
>
> - å›ºå®šå­çŸ©é˜µçš„ä¸Šè¾¹ç•Œ `top`
> - å›ºå®šå­çŸ©é˜µçš„ä¸‹è¾¹ç•Œ `bottom`
> - å¯¹æ¯ä¸€åˆ—æ±‚â€œä» top åˆ° bottom è¡Œçš„åˆ—å’Œâ€
>   - å¾—åˆ°ä¸€ä¸ª**ä¸€ç»´æ•°ç»„ `col_sum`**
> - å¯¹ `col_sum` ä½¿ç”¨ **Kadane** ç®—æ³•ï¼Œæ±‚æœ€å¤§å­æ•°ç»„å’Œï¼ˆç›¸å½“äºå›ºå®šä¸Šä¸‹è¾¹ç•Œåï¼Œåœ¨åˆ—æ–¹å‘æ‰¾åˆ°å·¦å³è¾¹ç•Œï¼‰
>
> #### ä¸¾ä¾‹ï¼š
>
> ```
> 0 -2 -7 0
> 9  2 -6 2
> -4 1 -4 1
> -1 8  0 -2
> ```
>
> æ¯”å¦‚ top=1, bottom=3ï¼Œåˆ™
> col_sum = [9-4-1, 2+1+8, -6-4+0, 2+1-2] = [4, 11, -10, 1]
> â†’ Kadane(col_sum) = 15ï¼Œå¯¹åº”çŸ©é˜µæ­£æ˜¯æ ·ä¾‹è¾“å‡ºã€‚
>
> ------
>
> äºŒã€æ ¸å¿ƒä»£ç ç»“æ„åˆ†æ
>
> ```python
> def kadane(s):
>     curr_max = total_max = s[0]
>     for x in s[1:]:
>         curr_max = max(x, curr_max + x)
>         total_max = max(total_max, curr_max)
>     return total_max
> ```
>
> ä¸€ç»´ Kadaneï¼š
>
> - `curr_max` è¡¨ç¤ºâ€œä»¥å½“å‰å…ƒç´ ç»“å°¾çš„æœ€å¤§è¿ç»­å’Œâ€ï¼›
> - `total_max` è¡¨ç¤ºâ€œå…¨å±€æœ€å¤§å’Œâ€ã€‚
>
> ------
>
> ```python
> def max_sum_matrix(mat):
>     max_sum = -float('inf')
>     row, col = len(mat), len(mat[0])
>     for top in range(row):
>         col_sum = [0] * col
>         for bottom in range(top, row):
>             for c in range(col):
>                 col_sum[c] += mat[bottom][c]
>             max_sum = max(max_sum, kadane(col_sum))
>     return max_sum
> ```
>
> å¤–å±‚ `top` å’Œ `bottom` æ§åˆ¶ä¸Šä¸‹è¾¹ç•Œï¼ˆO(nÂ²)ï¼‰ï¼›
> å†…å±‚ Kadane å¤„ç†åˆ—æ–¹å‘ï¼ˆO(n)ï¼‰ï¼›
> æ•´ä½“æ—¶é—´å¤æ‚åº¦ **O(nÂ³)**ï¼Œé€‚ç”¨äº N â‰¤ 100 çš„é¢˜ç›®ã€‚
>
> ------
>
> ä¸‰ã€è¾“å…¥å¤„ç†é€»è¾‘è¯´æ˜
>
> OJ ç»™çš„è¾“å…¥å¯èƒ½æœ‰ç©ºæ ¼å’Œæ¢è¡Œæ··åˆï¼Œæ‰€ä»¥æ­£ç¡®åšæ³•æ˜¯â€”â€”
>
> > ä¸è¦é€è¡Œä¸¥æ ¼è¯»å–ï¼Œè€Œæ˜¯ä¸€ç›´è¯»å–ç›´åˆ°è·å– NÂ² ä¸ªæ•´æ•°ã€‚
>
> ```python
> n = int(input())
> nums = []
> while len(nums) < n**2:
>     nums.extend(input().split())
> mat = [list(map(int, nums[i*n:(i+1)*n])) for i in range(n)]
> print(max_sum_matrix(mat))
> ```
>
> å››ã€æ‰©å±•æ€è€ƒï¼ˆå¯é€‰ä¼˜åŒ–ï¼‰
>
> 1. **å‰ç¼€å’ŒåŠ é€Ÿåˆ—å’Œè®¡ç®—**
>    - å¯ä»¥é¢„å…ˆæ„å»ºè¡Œæ–¹å‘å‰ç¼€å’Œ `prefix[r][c]`
>    - ä½¿å¾— `col_sum[c] = prefix[bottom][c] - prefix[top-1][c]`
>    - æ—¶é—´å¤æ‚åº¦ä»ç„¶ O(nÂ³)ï¼Œä½†å¸¸æ•°é¡¹æ›´å°ã€‚
> 2. **å…¨è´Ÿæ•°çŸ©é˜µ**
>    - Kadane å·²æ­£ç¡®å¤„ç†ï¼ˆè¿”å›æœ€å¤§å•ä¸ªå…ƒç´ ï¼‰ã€‚
> 3. **ç©ºé—´å¤æ‚åº¦**
>    - O(n)ï¼Œä»…ç”¨åˆ° `col_sum`ã€‚



è¿™ä¸ªé—®é¢˜æ˜¯ä¸€ä¸ªç»å…¸çš„â€œæœ€å¤§å­çŸ©é˜µå’Œâ€é—®é¢˜ï¼Œå±äºäºŒç»´åŠ¨æ€è§„åˆ’çš„åº”ç”¨åœºæ™¯ã€‚è§£å†³çš„æ ¸å¿ƒæ€æƒ³æ˜¯å°†äºŒç»´é—®é¢˜é™ä¸ºå¤šä¸ªä¸€ç»´çš„â€œæœ€å¤§å­æ®µå’Œâ€é—®é¢˜ï¼ˆKadane ç®—æ³•ï¼‰ï¼Œä»è€Œé™ä½å¤æ‚åº¦ã€‚

------

âœ… è§£é¢˜æ€è·¯ï¼ˆäºŒç»´ Kadane å˜ç§ï¼‰

1. å›ºå®šä¸¤ä¸ªè¡Œç´¢å¼• `top` å’Œ `bottom`ï¼Œå°†è¿™ä¸¤è¡Œä¹‹é—´ï¼ˆåŒ…å«ï¼‰çš„çŸ©é˜µå‹ç¼©æˆä¸€ä¸ªä¸€ç»´æ•°ç»„ `temp_col_sum`ï¼Œå…¶ä¸­æ¯ä¸ªå…ƒç´ æ˜¯è¿™å‡ è¡Œä¸­è¯¥åˆ—çš„å’Œã€‚
2. åœ¨è¿™ä¸ªä¸€ç»´æ•°ç»„ä¸Šåº”ç”¨â€œæœ€å¤§å­æ®µå’Œâ€ç®—æ³•ï¼ˆKadaneï¼‰æ±‚å‡ºæœ€å¤§å’Œã€‚
3. æšä¸¾æ‰€æœ‰å¯èƒ½çš„ `top` å’Œ `bottom` ç»„åˆï¼Œæ›´æ–°å…¨å±€æœ€å¤§å€¼ã€‚

------

âœ… ä»£ç å®ç°ï¼ˆPythonï¼‰

```python
'''
ä¸ºäº†æ‰¾åˆ°æœ€å¤§çš„éç©ºå­çŸ©é˜µï¼Œå¯ä»¥ä½¿ç”¨åŠ¨æ€è§„åˆ’ä¸­çš„Kadaneç®—æ³•è¿›è¡Œæ‰©å±•æ¥å¤„ç†äºŒç»´çŸ©é˜µã€‚
åŸºæœ¬æ€è·¯æ˜¯å°†äºŒç»´é—®é¢˜è½¬åŒ–ä¸ºä¸€ç»´é—®é¢˜ï¼šå¯ä»¥è®¡ç®—å‡ºä»ç¬¬iè¡Œåˆ°ç¬¬jè¡Œçš„åˆ—çš„ç´¯è®¡å’Œï¼Œ
è¿™æ ·å°±å¾—åˆ°äº†ä¸€ä¸ªä¸€ç»´æ•°ç»„ã€‚ç„¶åå¯¹è¿™ä¸ªä¸€ç»´æ•°ç»„åº”ç”¨Kadaneç®—æ³•ï¼Œæ‰¾åˆ°æœ€å¤§çš„å­æ•°ç»„å’Œã€‚
é€šè¿‡éå†æ‰€æœ‰å¯èƒ½çš„è¡Œç»„åˆï¼Œæˆ‘ä»¬å¯ä»¥æ‰¾åˆ°æœ€å¤§çš„å­çŸ©é˜µã€‚
'''
def max_submatrix(matrix, n):
    def kadane(arr):
      	# max_ending_here ç”¨äºè¿½è¸ªåˆ°å½“å‰å…ƒç´ ä¸ºæ­¢åŒ…å«å½“å‰å…ƒç´ çš„æœ€å¤§å­æ•°ç»„å’Œã€‚
        # max_so_far ç”¨äºå­˜å‚¨è¿„ä»Šä¸ºæ­¢é‡åˆ°çš„æœ€å¤§å­æ•°ç»„å’Œã€‚
        max_end_here = max_so_far = arr[0]
        for x in arr[1:]:
          	# å¯¹äºæ¯ä¸ªæ–°å…ƒç´ ï¼Œæˆ‘ä»¬å†³å®šæ˜¯å¼€å§‹ä¸€ä¸ªæ–°çš„å­æ•°ç»„ï¼ˆä»…åŒ…å«å½“å‰å…ƒç´  xï¼‰ï¼Œ
            # è¿˜æ˜¯å°†å½“å‰å…ƒç´ æ·»åŠ åˆ°ç°æœ‰çš„å­æ•°ç»„ä¸­ã€‚è¿™ä¸€æ­¥æ˜¯ Kadane ç®—æ³•çš„æ ¸å¿ƒã€‚
            max_end_here = max(x, max_end_here + x)
            max_so_far = max(max_so_far, max_end_here)
        return max_so_far

    max_sum = float('-inf')

    for top in range(n):
        temp_col_num = [0] * n
        for bottom in range(top, n):
            for col in range(n):
                temp_col_num[col] += matrix[bottom][col]
            max_sum = max(max_sum, kadane(temp_col_num))
    return max_sum

# è¾“å…¥å¤„ç†
import sys
data = sys.stdin.read().split()
n = int(data[0])
numbers = list(map(int, data[1:]))
matrix = [numbers[i * n:(i + 1) * n] for i in range(n)]

max_sum = max_submatrix(matrix, n)
print(max_sum)
```

------

âœ… æ—¶é—´å¤æ‚åº¦åˆ†æ

- å¤–å±‚åŒé‡å¾ªç¯ï¼ˆ`top` å’Œ `bottom`ï¼‰ï¼šO(nÂ²)
- å†…å±‚ Kadaneï¼šO(n)
- æ€»ä½“æ—¶é—´å¤æ‚åº¦ï¼š**O(nÂ³)**ï¼Œå¯¹äº `n <= 100` æ˜¯å¯æ¥å—çš„ã€‚





# End
